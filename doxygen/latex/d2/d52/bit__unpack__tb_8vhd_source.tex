\subsection{bit\+\_\+unpack\+\_\+tb.\+vhd}
\label{bit__unpack__tb_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/bit\+\_\+unpack/sim/bit\+\_\+unpack\+\_\+tb.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/bit\+\_\+unpack/sim/bit\+\_\+unpack\+\_\+tb.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00002 \textcolor{keyword}{-- FILE:    bit\_pack\_tb.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION: }
00004 \textcolor{keyword}{-- DATE:    Feb 13, 2014}
00005 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00006 \textcolor{keyword}{-- REVISIONS:}
00007 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00008 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00009 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00010 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00011 
00012 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00013 \textcolor{keyword}{-- Entity declaration}
00014 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00015 \textcolor{keywordflow}{entity }bit_unpack_tb \textcolor{keywordflow}{is}
00016 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{bit\_unpack\_tb};
00017 
00018 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00019 \textcolor{keyword}{-- Architecture}
00020 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00021 
00022 \textcolor{keywordflow}{architecture} tb\_behave \textcolor{keywordflow}{of} bit_unpack_tb is
00023    \textcolor{keywordflow}{constant} \textcolor{vhdlchar}{clk0_period}   \textcolor{vhdlchar}{:} \textcolor{comment}{time} \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{10} \textcolor{vhdlchar}{ns};
00024    \textcolor{keywordflow}{constant} \textcolor{vhdlchar}{clk1_period}   \textcolor{vhdlchar}{:} \textcolor{comment}{time} \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{10} \textcolor{vhdlchar}{ns}; 
00025 \textcolor{keyword}{   --signals}
00026     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{clk0}\textcolor{vhdlchar}{,}\textcolor{vhdlchar}{clk1}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00027     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{reset_n}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic}; 
00028    
00029 \textcolor{keyword}{   --dut0}
00030    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut0_data_in}           \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00031    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut0_data_in_valid}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00032    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut0_sample_width}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{:=}\textcolor{vhdllogic}{"01"};\textcolor{keyword}{ --"10"-12bit, "01"-14bit,
       "00"-16bit;}
00033    
00034    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut0_data_out}          \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00035    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut0_data_out_valid}    \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00036    
00037 \textcolor{keyword}{   --dut1}
00038    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut1_n}                 \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{7} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{:=}\textcolor{vhdlchar}{x}\textcolor{vhdllogic}{"00"};
00039    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut1_pulse_out}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00040    
00041 \textcolor{keyword}{   --dut2}
00042    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut2_rdreq}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00043    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut2_q}                 \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00044    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut2_rdempty}           \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00045    
00046 \textcolor{keyword}{   --dut3}
00047    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dut3_data_in_valid}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00048    
00049    
00050    
00051    
00052    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data_wrreq}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00053    
00054    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data12_0}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{11} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00055    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data12_1}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{11} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00056    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data12_2}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{11} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00057    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data12_3}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{11} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00058                   
00059    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data14_0}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{13} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00060    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data14_1}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{13} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00061    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data14_2}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{13} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00062    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data14_3}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{13} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00063                   
00064    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data16_0}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00065    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data16_1}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00066    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data16_2}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00067    \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data16_3}               \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00068    
00069    
00070 \textcolor{vhdlkeyword}{begin }
00071   
00072       clock0: \textcolor{keywordflow}{process} \textcolor{keywordflow}{is}
00073 \textcolor{vhdlkeyword}{    begin}
00074         \textcolor{vhdlchar}{clk0} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdlchar}{clk0_period}\textcolor{vhdlchar}{/}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2};
00075         \textcolor{vhdlchar}{clk0} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdlchar}{clk0_period}\textcolor{vhdlchar}{/}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2};
00076     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process} \textcolor{vhdlchar}{clock0};
00077 
00078     clock: \textcolor{keywordflow}{process} \textcolor{keywordflow}{is}
00079 \textcolor{vhdlkeyword}{    begin}
00080         \textcolor{vhdlchar}{clk1} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdlchar}{clk1_period}\textcolor{vhdlchar}{/}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2};
00081         \textcolor{vhdlchar}{clk1} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdlchar}{clk1_period}\textcolor{vhdlchar}{/}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2};
00082     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process} \textcolor{vhdlchar}{clock};
00083     
00084         res: \textcolor{keywordflow}{process} \textcolor{keywordflow}{is}
00085 \textcolor{vhdlkeyword}{    begin}
00086         \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{20} \textcolor{vhdlchar}{ns};
00087         \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait};
00088     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process} \textcolor{vhdlchar}{res};
00089    
00090    
00091    
00092    
00093 \textcolor{keyword}{   ---------------------------------------------------------------------------------------------------}
00095 \textcolor{keyword}{   ---------------------------------------------------------------------------------------------------}
00096    DATA12\_CNT : \textcolor{keywordflow}{process}(reset_n, clk0)
00097 \textcolor{vhdlkeyword}{   begin}
00098       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00099          \textcolor{vhdlchar}{data12_0}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00100          \textcolor{vhdlchar}{data12_1}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00101          \textcolor{vhdlchar}{data12_2}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00102          \textcolor{vhdlchar}{data12_3}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};  
00103       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk0}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk0} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00104          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{data_wrreq}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}   
00105             \textcolor{vhdlchar}{data12_0} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data12_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{4};
00106             \textcolor{vhdlchar}{data12_1} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data12_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{5};
00107             \textcolor{vhdlchar}{data12_2} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data12_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{6};
00108             \textcolor{vhdlchar}{data12_3} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data12_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{7}; 
00109          \textcolor{keywordflow}{else} 
00110             \textcolor{vhdlchar}{data12_0} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data12_0};
00111             \textcolor{vhdlchar}{data12_1} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data12_1};
00112             \textcolor{vhdlchar}{data12_2} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data12_2};
00113             \textcolor{vhdlchar}{data12_3} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data12_3}; 
00114          \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00115       \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00116    \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00117    
00118 \textcolor{keyword}{   ---------------------------------------------------------------------------------------------------}
00120 \textcolor{keyword}{   ---------------------------------------------------------------------------------------------------}
00121    DATA14\_CNT : \textcolor{keywordflow}{process}(reset_n, clk0)
00122 \textcolor{vhdlkeyword}{   begin}
00123       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00124          \textcolor{vhdlchar}{data14_0}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00125          \textcolor{vhdlchar}{data14_1}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00126          \textcolor{vhdlchar}{data14_2}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00127          \textcolor{vhdlchar}{data14_3}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};  
00128       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk0}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk0} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00129          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{data_wrreq}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}   
00130             \textcolor{vhdlchar}{data14_0} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data14_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{4};
00131             \textcolor{vhdlchar}{data14_1} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data14_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{5};
00132             \textcolor{vhdlchar}{data14_2} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data14_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{6};
00133             \textcolor{vhdlchar}{data14_3} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data14_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{7}; 
00134          \textcolor{keywordflow}{else} 
00135             \textcolor{vhdlchar}{data14_0} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data14_0};
00136             \textcolor{vhdlchar}{data14_1} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data14_1};
00137             \textcolor{vhdlchar}{data14_2} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data14_2};
00138             \textcolor{vhdlchar}{data14_3} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data14_3}; 
00139          \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00140       \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00141    \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00142    
00143 \textcolor{keyword}{   ---------------------------------------------------------------------------------------------------}
00145 \textcolor{keyword}{   ---------------------------------------------------------------------------------------------------}
00146    DATA16\_CNT : \textcolor{keywordflow}{process}(reset_n, clk0)
00147 \textcolor{vhdlkeyword}{   begin}
00148       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00149          \textcolor{vhdlchar}{data16_0}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00150          \textcolor{vhdlchar}{data16_1}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00151          \textcolor{vhdlchar}{data16_2}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00152          \textcolor{vhdlchar}{data16_3}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};  
00153       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk0}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk0} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00154          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{data_wrreq}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}   
00155             \textcolor{vhdlchar}{data16_0} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data16_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{4};
00156             \textcolor{vhdlchar}{data16_1} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data16_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{5};
00157             \textcolor{vhdlchar}{data16_2} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data16_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{6};
00158             \textcolor{vhdlchar}{data16_3} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data16_0}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{7}; 
00159          \textcolor{keywordflow}{else} 
00160             \textcolor{vhdlchar}{data16_0} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data16_0};
00161             \textcolor{vhdlchar}{data16_1} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data16_1};
00162             \textcolor{vhdlchar}{data16_2} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data16_2};
00163             \textcolor{vhdlchar}{data16_3} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data16_3}; 
00164          \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00165       \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00166    \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00167    
00168    
00169    \textcolor{vhdlchar}{dut0_data_in} \textcolor{vhdlchar}{<=}   \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{"0000000000000000"} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data12_3}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{
      data12_2}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data12_1}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data12_0}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{
      dut0_sample_width}\textcolor{vhdlchar}{=}\textcolor{vhdllogic}{"10"} \textcolor{keywordflow}{else} 
00170                      \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{"00000000"} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data14_3}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{
      data14_2}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data14_1}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data14_0}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{
      dut0_sample_width}\textcolor{vhdlchar}{=}\textcolor{vhdllogic}{"01"} \textcolor{keywordflow}{else} 
00171                      \textcolor{vhdlchar}{(}\textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data16_3}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data16_2}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{
      data16_1}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data16_0}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{)}; 
00172   
00173   \textcolor{vhdlchar}{dut0_data_in_valid} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data_wrreq};
00174   
00175   bit\_pack\_dut0 : \textcolor{keywordflow}{entity} work.bit_pack 
00176 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00177         clk             => clk0,
00178         reset_n         => reset_n,
00179         data_in         => dut0_data_in,
00180         data_in_valid   => dut0_data_in_valid,
00181         sample_width    => dut0_sample_width,
00182         data_out        => dut0_data_out,
00183         data_out_valid  => dut0_data_out_valid
00184 \textcolor{vhdlchar}{)};  
00185 
00186 pulse\_gen\_dut1 : \textcolor{keywordflow}{entity} work.pulse_gen
00187 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00188          clk         => clk0,
00189          reset_n     => reset_n,
00190          n           => dut1_n, 
00191          pulse\_out   => dut1_pulse_out
00192                
00193 \textcolor{vhdlchar}{)};
00194 
00195 \textcolor{vhdlchar}{dut2_rdreq} \textcolor{vhdlchar}{<=} \textcolor{keywordflow}{not} \textcolor{vhdlchar}{dut2_rdempty};
00196 
00197 fifo\_inst\_dut2 : \textcolor{keywordflow}{entity} work.fifo_inst
00198   \textcolor{keywordflow}{generic} \textcolor{keywordflow}{map}(
00199          dev_family     => \textcolor{keyword}{"Cyclone IV E"}  ,
00200          wrwidth         => \textcolor{vhdllogic}{64},
00201          wrusedw_witdth  => \textcolor{vhdllogic}{11},\textcolor{keyword}{ --12=2048 words }
00202          rdwidth         => \textcolor{vhdllogic}{32},
00203          rdusedw_width   => \textcolor{vhdllogic}{11},
00204          show_ahead      => \textcolor{keyword}{"OFF"}
00205   \textcolor{vhdlchar}{)} 
00206   \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00207 \textcolor{keyword}{      --input ports }
00208       reset_n       => reset_n,
00209       wrclk         => clk0,
00210       wrreq         => dut0_data_out_valid,
00211       data          => dut0_data_out,
00212       wrfull        => \textcolor{keywordflow}{open},
00213         wrempty       => \textcolor{keywordflow}{open},
00214       wrusedw       => \textcolor{keywordflow}{open},
00215       rdclk          => clk0,
00216       rdreq         => dut2_rdreq,
00217       q             => dut2_q,
00218       rdempty       => dut2_rdempty,
00219       rdusedw       => \textcolor{keywordflow}{open}          
00220         \textcolor{vhdlchar}{)};
00221         
00222         
00223         
00224 proc\_name : \textcolor{keywordflow}{process}(clk0, reset_n)
00225 \textcolor{vhdlkeyword}{begin}
00226    \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00227       \textcolor{vhdlchar}{dut3_data_in_valid} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00228    \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk0}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{clk0}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then} 
00229       \textcolor{vhdlchar}{dut3_data_in_valid} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{dut2_rdreq};
00230    \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00231 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00232         
00233                
00234   bit\_unpack\_dut3 : \textcolor{keywordflow}{entity} work.bit_unpack 
00235 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00236         clk             => clk0,
00237         reset_n         => reset_n,
00238         data_in         => dut2_q,
00239         data_in_valid   => dut3_data_in_valid,
00240         sample_width    => dut0_sample_width,
00241         data_out        => \textcolor{keywordflow}{open},
00242         data_out_valid  => \textcolor{keywordflow}{open}
00243 \textcolor{vhdlchar}{)};
00244 
00245 
00246 \textcolor{vhdlchar}{data_wrreq}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{dut1_pulse_out};
00247 
00248     \textcolor{keywordflow}{end} \textcolor{vhdlchar}{tb\_behave};
00249   
00250   
00251 
00252 
00253   
\end{DoxyCode}
