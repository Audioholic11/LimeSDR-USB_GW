\subsection{clock\+\_\+test.\+vhd}
\label{clock__test_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/self\+\_\+test/clock\+\_\+test.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/self\+\_\+test/clock\+\_\+test.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00002 \textcolor{keyword}{-- FILE:    clock\_test.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION: clock test module}
00004 \textcolor{keyword}{-- DATE:    Sep 5, 2016}
00005 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00006 \textcolor{keyword}{-- REVISIONS:}
00007 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00008 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00009 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00010 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00011 
00012 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00013 \textcolor{keyword}{-- Entity declaration}
00014 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00015 \textcolor{keywordflow}{entity }clock_test \textcolor{keywordflow}{is}
00016   \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00017 \textcolor{keyword}{        --input ports }
00018         \textcolor{vhdlchar}{FX3_clk}             \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00019         \textcolor{vhdlchar}{reset_n}             \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00020           \textcolor{vhdlchar}{test_en}               \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{3} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00021           \textcolor{vhdlchar}{test_frc_err}          \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{3} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00022           \textcolor{vhdlchar}{test_cmplt}            \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{3} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00023           \textcolor{vhdlchar}{test_rez}              \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{3} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00024           
00025           \textcolor{vhdlchar}{Si5351C_clk_0}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00026           \textcolor{vhdlchar}{Si5351C_clk_1}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00027           \textcolor{vhdlchar}{Si5351C_clk_2}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00028           \textcolor{vhdlchar}{Si5351C_clk_3}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00029           \textcolor{vhdlchar}{Si5351C_clk_5}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00030           \textcolor{vhdlchar}{Si5351C_clk_6}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00031           \textcolor{vhdlchar}{Si5351C_clk_7}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00032           \textcolor{vhdlchar}{LMK_CLK}               \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00033           \textcolor{vhdlchar}{ADF_MUXOUT}            \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00034           
00035           \textcolor{vhdlchar}{FX3_clk_cnt}           \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00036           \textcolor{vhdlchar}{Si5351C_clk_0_cnt}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00037           \textcolor{vhdlchar}{Si5351C_clk_1_cnt}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00038           \textcolor{vhdlchar}{Si5351C_clk_2_cnt}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00039           \textcolor{vhdlchar}{Si5351C_clk_3_cnt}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00040           \textcolor{vhdlchar}{Si5351C_clk_5_cnt}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00041           \textcolor{vhdlchar}{Si5351C_clk_6_cnt}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00042           \textcolor{vhdlchar}{Si5351C_clk_7_cnt}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00043           \textcolor{vhdlchar}{LMK_CLK_cnt}           \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{23} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00044           \textcolor{vhdlchar}{ADF_MUXOUT_cnt}        \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)}
00045           
00046           
00047 
00048 \textcolor{keyword}{        --output ports }
00049         
00050         \textcolor{vhdlchar}{)};
00051 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{clock\_test};
00052 
00053 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00054 \textcolor{keyword}{-- Architecture}
00055 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00056 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} clock_test is
00057 \textcolor{keyword}{--declare signals,  components here}
00058 
00059 \textcolor{keywordflow}{component} clk_no_ref_test \textcolor{keywordflow}{is}
00060   \textcolor{keywordflow}{port} (
00061 \textcolor{keyword}{        --input ports }
00062         clk             : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00063         reset_n         : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00064           test_en           : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00065           test_cnt          : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00066           test_complete : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00067           test_pass_fail    : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}    
00068         );
00069 \textcolor{keywordflow}{end} \textcolor{keywordflow}{component};
00070 
00071 \textcolor{keywordflow}{component} clk_with_ref_test \textcolor{keywordflow}{is}
00072   \textcolor{keywordflow}{port} (
00073 \textcolor{keyword}{        --input ports }
00074         refclk          : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00075         reset_n         : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00076           clk0              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00077           clk1              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00078           clk2              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00079           clk3              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00080           clk4              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00081           clk5              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00082           clk6              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};       
00083           test_en           : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00084           test_cnt0         : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00085           test_cnt1         : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00086           test_cnt2         : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00087           test_cnt3         : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00088           test_cnt4         : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00089           test_cnt5         : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00090           test_cnt6         : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00091           test_complete : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00092           test_pass_fail    : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}
00093      
00094         );
00095 \textcolor{keywordflow}{end} \textcolor{keywordflow}{component};
00096 
00097 \textcolor{keywordflow}{component} singl_clk_with_ref_test \textcolor{keywordflow}{is}
00098   \textcolor{keywordflow}{port} (
00099 \textcolor{keyword}{        --input ports }
00100         refclk          : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00101         reset_n         : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00102           clk0              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00103           
00104           test_en           : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00105           test_cnt0         : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{23} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00106           test_complete : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00107           test_pass_fail    : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}
00108      
00109         );
00110 \textcolor{keywordflow}{end} \textcolor{keywordflow}{component};
00111 
00112 \textcolor{keywordflow}{component} transition_count \textcolor{keywordflow}{is}
00113   \textcolor{keywordflow}{port} (
00114 \textcolor{keyword}{        --input ports }
00115             clk             : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00116             reset_n         : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00117             trans_wire      : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00118           
00119             test_en         : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00120             test_cnt            : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00121             test_complete   : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00122             test_pass_fail  : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}
00123      
00124         );
00125 \textcolor{keywordflow}{end} \textcolor{keywordflow}{component};
00126 
00127 
00128 \textcolor{vhdlkeyword}{begin}
00129 
00130 FX3\_clk\_test : clk_no_ref_test
00131   \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00132         clk             => FX3_clk,
00133         reset_n         => reset_n,
00134           test_en           => test_en\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)},
00135           test_cnt          => FX3_clk_cnt,
00136           test_complete => test_cmplt\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)},
00137           test_pass_fail    => test_rez\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)}   
00138         \textcolor{vhdlchar}{)};
00139           
00140           
00141 Si5351C\_test : clk_with_ref_test
00142   \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00143 \textcolor{keyword}{        --input ports }
00144         refclk          => FX3_clk,
00145         reset_n         => reset_n,
00146           clk0              => Si5351C_clk_0,
00147           clk1              => Si5351C_clk_1,
00148           clk2              => Si5351C_clk_2,
00149           clk3              => Si5351C_clk_3,
00150           clk4              => Si5351C_clk_5,
00151           clk5              => Si5351C_clk_6,
00152           clk6              => Si5351C_clk_7,         
00153           test_en           => test_en\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)},
00154           test_cnt0         => Si5351C_clk_0_cnt,
00155           test_cnt1         => Si5351C_clk_1_cnt,
00156           test_cnt2         => Si5351C_clk_2_cnt,
00157           test_cnt3         => Si5351C_clk_3_cnt,
00158           test_cnt4         => Si5351C_clk_5_cnt,
00159           test_cnt5         => Si5351C_clk_6_cnt,
00160           test_cnt6         => Si5351C_clk_7_cnt,
00161           test_complete => test_cmplt\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)},
00162           test_pass_fail    => test_rez\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)}
00163      
00164         \textcolor{vhdlchar}{)};        
00165 
00166           
00167 LML\_CLK\_test : singl_clk_with_ref_test
00168   \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00169 \textcolor{keyword}{        --input ports }
00170         refclk          => FX3_clk,
00171         reset_n         => reset_n,
00172           clk0              => LMK_CLK,       
00173           test_en           => test_en\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{2}\textcolor{vhdlchar}{)},
00174           test_cnt0         => LMK_CLK_cnt,
00175           test_complete => test_cmplt\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{2}\textcolor{vhdlchar}{)},
00176           test_pass_fail    => test_rez\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{2}\textcolor{vhdlchar}{)}   
00177         \textcolor{vhdlchar}{)};
00178     
00179 ADF\_muxout\_test : transition_count
00180   \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00181 \textcolor{keyword}{        --input ports }
00182             clk             => FX3_clk,
00183             reset_n         => reset_n,
00184             trans_wire      => ADF_MUXOUT,
00185           
00186             test_en         => test_en\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{3}\textcolor{vhdlchar}{)},
00187             test_cnt            => ADF_MUXOUT_cnt,
00188             test_complete   => test_cmplt\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{3}\textcolor{vhdlchar}{)},
00189             test_pass_fail  => \textcolor{keywordflow}{open}
00190      
00191         \textcolor{vhdlchar}{)};  
00192           
00193 \textcolor{vhdlchar}{test_rez}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{3}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{ADF_MUXOUT};
00194 
00195 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};
00196 
00197 
00198 
00199 
00200 
\end{DoxyCode}
