\subsection{p2d\+\_\+clr\+\_\+fsm.\+vhd}
\label{p2d__clr__fsm_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/packets2data/synth/p2d\+\_\+clr\+\_\+fsm.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/packets2data/synth/p2d\+\_\+clr\+\_\+fsm.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00002 \textcolor{keyword}{-- FILE:    p2d\_clr\_fsm.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION: FSm for data reading from packets.}
00004 \textcolor{keyword}{-- DATE:    April 6, 2017}
00005 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00006 \textcolor{keyword}{-- REVISIONS:}
00007 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00008 
00009 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00010 \textcolor{keyword}{-- Notes:}
00011 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00012 
00013 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00014 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00015 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00016 
00017 \textcolor{vhdlkeyword}{LIBRARY }\textcolor{keywordflow}{lpm};
00018 \textcolor{vhdlkeyword}{USE }\textcolor{keywordflow}{lpm.all};
00019 
00020 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00021 \textcolor{keyword}{-- Entity declaration}
00022 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00023 \textcolor{keywordflow}{entity }p2d_clr_fsm \textcolor{keywordflow}{is}
00024    \textcolor{keywordflow}{generic} \textcolor{vhdlchar}{(}
00025       \textcolor{vhdlchar}{pct_size_w}           \textcolor{vhdlchar}{:} \textcolor{comment}{integer} \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{16};
00026       \textcolor{vhdlchar}{n_buff}               \textcolor{vhdlchar}{:} \textcolor{comment}{integer} \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{2}\textcolor{keyword}{ -- 2,4 valid values}
00027    \textcolor{vhdlchar}{)};
00028    \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00029       \textcolor{vhdlchar}{clk}                  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00030       \textcolor{vhdlchar}{reset_n}              \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00031       \textcolor{vhdlchar}{pct_size}             \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{pct_size_w}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};\textcolor{keyword}{   --Whole packet size in }
00032 \textcolor{keyword}{                                                                           --in\_pct\_data\_w words}
00033                                                                            
00034       \textcolor{vhdlchar}{smpl_nr}              \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00035                                                                            
00036       \textcolor{vhdlchar}{pct_hdr_0}            \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00037       \textcolor{vhdlchar}{pct_hdr_0_valid}      \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00038       
00039       \textcolor{vhdlchar}{pct_hdr_1}            \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00040       \textcolor{vhdlchar}{pct_hdr_1_valid}      \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00041      
00042       \textcolor{vhdlchar}{pct_data_clr_n}       \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00043       \textcolor{vhdlchar}{pct_data_clr_dis}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00044 
00045       \textcolor{vhdlchar}{pct_buff_rdy}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)}   
00046       
00047         \textcolor{vhdlchar}{)};
00048 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{p2d\_clr\_fsm};
00049 
00050 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00051 \textcolor{keyword}{-- Architecture}
00052 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00053 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} p2d_clr_fsm is
00054 \textcolor{keyword}{--declare signals,  components here}
00055 
00056 \textcolor{keywordflow}{type} \textcolor{vhdlchar}{state_type} \textcolor{keywordflow}{is} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{idle}\textcolor{vhdlchar}{,} \textcolor{vhdlchar}{sel\_buff}\textcolor{vhdlchar}{,} \textcolor{vhdlchar}{rd\_buff}\textcolor{vhdlchar}{)};
00057 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{current_state}\textcolor{vhdlchar}{,} \textcolor{vhdlchar}{next_state} \textcolor{vhdlchar}{:} \textcolor{vhdlchar}{state_type}; 
00058 
00059 \textcolor{keywordflow}{type} \textcolor{vhdlchar}{smpl_nr_array_type}  \textcolor{keywordflow}{is} \textcolor{keywordflow}{array} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{to} \textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{of} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};  
00060 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{smpl_nr_array}       \textcolor{vhdlchar}{:} \textcolor{vhdlchar}{smpl_nr_array_type};
00061 
00062 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{pct_smpl_nr_less}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00063 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{pct_smpl_nr_sync_dis}   \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00064 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{pct_buff_rdy_reg0}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00065 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{pct_buff_rdy_reg1}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00066 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{pct_buff_rdy_reg2}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00067 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{pct_buff_rdy_reg3}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00068 
00069 
00070 \textcolor{keywordflow}{COMPONENT} lpm\_compare
00071     \textcolor{keywordflow}{GENERIC} (
00072         lpm\_pipeline        : \textcolor{comment}{NATURAL};
00073         lpm\_representation      : \textcolor{comment}{STRING};
00074         lpm\_type        : \textcolor{comment}{STRING};
00075         lpm\_width       : \textcolor{comment}{NATURAL}
00076     );
00077     \textcolor{keywordflow}{PORT} (
00078             clock   : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC} ;
00079             dataa   : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00080             datab   : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00081             aeb : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC} ;
00082             alb : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC} 
00083     );
00084     \textcolor{keywordflow}{END} \textcolor{keywordflow}{COMPONENT};
00085 
00086 
00087 
00088 \textcolor{vhdlkeyword}{begin}
00089 
00090 
00091 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00092 \textcolor{keyword}{-- Capture sample numbers from packets to reg array}
00093 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00094 \textcolor{keywordflow}{process}(clk, reset_n)
00095 \textcolor{vhdlkeyword}{begin}
00096    \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00097       \textcolor{vhdlchar}{smpl_nr_array} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{)};
00098    \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then} 
00099       \textcolor{keywordflow}{for} \textcolor{vhdlchar}{i} \textcolor{keywordflow}{in} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{to} \textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{loop}
00100          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{pct_hdr_1_valid}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00101             \textcolor{vhdlchar}{smpl_nr_array}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{pct_hdr_1};
00102          \textcolor{keywordflow}{else} 
00103             \textcolor{vhdlchar}{smpl_nr_array}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{smpl_nr_array}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)};
00104          \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00105       \textcolor{keywordflow}{end} \textcolor{keywordflow}{loop};
00106    \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00107 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00108 
00109 
00110 
00111 
00112 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00113 \textcolor{keyword}{-- Pipelined comparators}
00114 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00115 \textcolor{vhdlchar}{gen\_lpm\_compare} \textcolor{vhdlchar}{:} 
00116 \textcolor{keywordflow}{for} \textcolor{vhdlchar}{i} \textcolor{keywordflow}{in} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{to} \textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{generate}
00117 LPM\_COMPARE\_component : LPM\_COMPARE
00118     \textcolor{keywordflow}{GENERIC} \textcolor{keywordflow}{MAP} (
00119         lpm\_pipeline         => \textcolor{vhdllogic}{3},
00120         lpm\_representation   => \textcolor{keyword}{"UNSIGNED"},
00121         lpm\_type             => \textcolor{keyword}{"LPM\_COMPARE"},
00122         lpm\_width            => \textcolor{vhdllogic}{64}
00123     \textcolor{vhdlchar}{)}
00124     \textcolor{keywordflow}{PORT} \textcolor{keywordflow}{MAP} (
00125         clock                => clk,
00126         dataa                => smpl_nr_array\textcolor{vhdlchar}{(}i\textcolor{vhdlchar}{)},
00127         datab                => smpl_nr,
00128         aeb                  => \textcolor{keywordflow}{open},
00129         alb                  => pct_smpl_nr_less\textcolor{vhdlchar}{(}i\textcolor{vhdlchar}{)}
00130     \textcolor{vhdlchar}{)};
00131    
00132 \textcolor{keywordflow}{end} \textcolor{keywordflow}{generate} \textcolor{vhdlchar}{gen\_lpm\_compare};
00133 
00134 
00135 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00136 \textcolor{keyword}{-- Capture pct synch disable bit}
00137 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00138 \textcolor{keywordflow}{process}(clk, reset_n)
00139 \textcolor{vhdlkeyword}{begin}
00140    \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00141       \textcolor{vhdlchar}{pct_smpl_nr_sync_dis} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00142    \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then} 
00143       \textcolor{keywordflow}{for} \textcolor{vhdlchar}{i} \textcolor{keywordflow}{in} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{to} \textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{loop}
00144          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{pct_hdr_0_valid}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00145             \textcolor{vhdlchar}{pct_smpl_nr_sync_dis}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{pct_hdr_0}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{4}\textcolor{vhdlchar}{)};
00146          \textcolor{keywordflow}{else} 
00147             \textcolor{vhdlchar}{pct_smpl_nr_sync_dis}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{pct_smpl_nr_sync_dis}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)};
00148          \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00149       \textcolor{keywordflow}{end} \textcolor{keywordflow}{loop};
00150    \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00151 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00152 
00153 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00154 \textcolor{keyword}{-- Clear packet buffer when received sample number is to old}
00155 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00156 \textcolor{keywordflow}{process}(clk, reset_n)
00157 \textcolor{vhdlkeyword}{begin}
00158    \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00159       \textcolor{vhdlchar}{pct_data_clr_n} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00160       \textcolor{vhdlchar}{pct_buff_rdy_reg0} \textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00161       \textcolor{vhdlchar}{pct_buff_rdy_reg1} \textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00162       \textcolor{vhdlchar}{pct_buff_rdy_reg2} \textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00163       \textcolor{vhdlchar}{pct_buff_rdy_reg3} \textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00164    \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00165       \textcolor{vhdlchar}{pct_buff_rdy_reg0} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{pct_buff_rdy};
00166       \textcolor{vhdlchar}{pct_buff_rdy_reg1} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{pct_buff_rdy_reg0};
00167       \textcolor{vhdlchar}{pct_buff_rdy_reg2} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{pct_buff_rdy_reg1};
00168       \textcolor{vhdlchar}{pct_buff_rdy_reg3} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{pct_buff_rdy_reg2};
00169       \textcolor{keywordflow}{for} \textcolor{vhdlchar}{i} \textcolor{keywordflow}{in} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{to} \textcolor{vhdlchar}{n_buff}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{loop}
00170          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{pct_data_clr_dis}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{pct_smpl_nr_sync_dis}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{AND} 
00171             \textcolor{vhdlchar}{pct_smpl_nr_less}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{pct_buff_rdy_reg3}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00172             \textcolor{vhdlchar}{pct_data_clr_n}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00173          \textcolor{keywordflow}{else} 
00174             \textcolor{vhdlchar}{pct_data_clr_n}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{i}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'};
00175          \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00176       \textcolor{keywordflow}{end} \textcolor{keywordflow}{loop};
00177    \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00178 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00179 
00180 
00181 
00182 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};   
00183 
00184 
00185 
00186 
00187 
\end{DoxyCode}
