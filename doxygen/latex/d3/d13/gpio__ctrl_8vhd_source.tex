\subsection{gpio\+\_\+ctrl.\+vhd}
\label{gpio__ctrl_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/general/gpio\+\_\+ctrl.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/general/gpio\+\_\+ctrl.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00002 \textcolor{keyword}{-- FILE:    gpio\_ctrl.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION: GPIO with controled direction. }
00004 \textcolor{keyword}{-- DATE:    March 17, 2017}
00005 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00006 \textcolor{keyword}{-- REVISIONS:}
00007 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00008 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00009 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00010 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00011 
00012 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00013 \textcolor{keyword}{-- Entity declaration}
00014 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00015 \textcolor{keywordflow}{entity }gpio_ctrl \textcolor{keywordflow}{is}
00016     \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00017         \textcolor{vhdlchar}{gpio}        \textcolor{vhdlchar}{:} \textcolor{keywordflow}{inout} \textcolor{comment}{std\_logic};
00018         \textcolor{vhdlchar}{gpio_in}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00019         \textcolor{vhdlchar}{mux_sel}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};\textcolor{keyword}{     -- mux select}
00020         \textcolor{vhdlchar}{dir_0}           \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};\textcolor{keyword}{     -- 0 - input, 1 - output.}
00021         \textcolor{vhdlchar}{dir_1}           \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};\textcolor{keyword}{     -- 0 - input, 1 - output.}
00022         \textcolor{vhdlchar}{out_val_0}   \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00023         \textcolor{vhdlchar}{out_val_1}   \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic}
00024 
00025         \textcolor{vhdlchar}{)};
00026 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{gpio\_ctrl};
00027 
00028 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00029 \textcolor{keyword}{-- Architecture}
00030 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00031 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} gpio_ctrl is
00032 \textcolor{keyword}{--declare signals,  components here}
00033 
00034 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{gpio_dir} \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00035 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{gpio_val} \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00036  
00037 \textcolor{vhdlkeyword}{begin}
00038 
00039 \textcolor{keyword}{--mux}
00040 \textcolor{vhdlchar}{gpio_dir} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{dir_0}       \textcolor{keywordflow}{when} \textcolor{vhdlchar}{mux_sel} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} \textcolor{vhdlchar}{dir_1};
00041 \textcolor{vhdlchar}{gpio_val} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{out_val_0}   \textcolor{keywordflow}{when} \textcolor{vhdlchar}{mux_sel} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} \textcolor{vhdlchar}{out_val_1};
00042 
00043 \textcolor{keyword}{--tri state buffer}
00044 \textcolor{vhdlchar}{gpio}        \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{gpio_val} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{gpio_dir} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} \textcolor{vhdlchar}{'}\textcolor{vhdlchar}{Z}\textcolor{vhdlchar}{'};
00045 
00046 \textcolor{vhdlchar}{gpio_in} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{gpio};
00047   
00048 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};
00049 
00050 
00051 
00052 
00053 
\end{DoxyCode}
