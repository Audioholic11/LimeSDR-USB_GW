\subsection{unpack\+\_\+64\+\_\+to\+\_\+64.\+vhd}
\label{unpack__64__to__64_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/bit\+\_\+unpack/synth/unpack\+\_\+64\+\_\+to\+\_\+64.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/bit\+\_\+unpack/synth/unpack\+\_\+64\+\_\+to\+\_\+64.\+vhd}}

\begin{DoxyCode}
00001 
00002 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00003 \textcolor{keyword}{-- FILE:    unpack\_64\_to\_64.vhd}
00004 \textcolor{keyword}{-- DESCRIPTION: unpacks bits from 63b words to 16 bit samples}
00005 \textcolor{keyword}{-- DATE:    March 30, 2017}
00006 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00007 \textcolor{keyword}{-- REVISIONS:}
00008 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00009 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00010 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00011 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00012 
00013 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00014 \textcolor{keyword}{-- Entity declaration}
00015 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00016 \textcolor{keywordflow}{entity }unpack_64_to_64 \textcolor{keywordflow}{is}
00017   \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00018 \textcolor{keyword}{      --input ports }
00019       \textcolor{vhdlchar}{clk}               \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00020       \textcolor{vhdlchar}{reset_n}           \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00021         \textcolor{vhdlchar}{data_in_wrreq}   \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00022         \textcolor{vhdlchar}{data64_in}       \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00023         \textcolor{vhdlchar}{data64_out}      \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00024         \textcolor{vhdlchar}{data_out_valid}  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}
00025        
00026         \textcolor{vhdlchar}{)};
00027 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{unpack\_64\_to\_64};
00028 
00029 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00030 \textcolor{keyword}{-- Architecture}
00031 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00032 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} unpack_64_to_64 is
00033 \textcolor{keyword}{--declare signals,  components here}
00034 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{word128_0}              \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00035 
00036 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{word128_0_valid}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00037 
00038 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{wr_cnt}                 \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00039 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data64_in_reg}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00040   
00041 \textcolor{vhdlkeyword}{begin}
00042 
00043 
00044 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00045 \textcolor{keyword}{-- Input data register}
00046 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00047   \textcolor{keywordflow}{process}(reset_n, clk)
00048 \textcolor{vhdlkeyword}{    begin}
00049       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00050             \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00051       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00052          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{data_in_wrreq} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00053                 \textcolor{vhdlchar}{data64_in_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data64_in};
00054          \textcolor{keywordflow}{else} 
00055             \textcolor{vhdlchar}{data64_in_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data64_in_reg};
00056          \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00057         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00058     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00059     
00060 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00061 \textcolor{keyword}{-- Write counter}
00062 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00063 \textcolor{keywordflow}{process}(clk, reset_n) \textcolor{keywordflow}{is} 
00064 \textcolor{vhdlkeyword}{    begin }
00065         \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00066             \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00067         \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00068             \textcolor{keywordflow}{if}  \textcolor{vhdlchar}{data_in_wrreq}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00069                 \textcolor{keywordflow}{if} \textcolor{vhdlchar}{wr_cnt} \textcolor{vhdlchar}{<} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{then} 
00070                     \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1};
00071                 \textcolor{keywordflow}{else} 
00072                     \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00073                 \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00074             \textcolor{keywordflow}{else}
00075                 \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{wr_cnt};
00076             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00077         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00078 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00079 
00080 
00081 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00082 \textcolor{keyword}{-- 64b word formation}
00083 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00084   \textcolor{keywordflow}{process}(reset_n, clk)
00085 \textcolor{vhdlkeyword}{    begin}
00086       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00087             \textcolor{vhdlchar}{word128_0}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00088          \textcolor{vhdlchar}{word128_0_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00089       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00090          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{=}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{data_in_wrreq}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00091                 \textcolor{vhdlchar}{word128_0}\textcolor{vhdlchar}{<=}  \textcolor{vhdlchar}{data64_in} \textcolor{vhdlchar}{&} \textcolor{vhdlchar}{data64_in_reg};
00092             \textcolor{vhdlchar}{word128_0_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'};
00093             \textcolor{keywordflow}{else} 
00094                 \textcolor{vhdlchar}{word128_0}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{word128_0};
00095             \textcolor{vhdlchar}{word128_0_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00096             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00097         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00098     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00099     
00100     
00101 \textcolor{vhdlchar}{data64_out}     \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{word128_0};
00102 \textcolor{vhdlchar}{data_out_valid} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{word128_0_valid};
00103 
00104 
00105  
00106 
00107 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};   
00108 
00109 
00110 
\end{DoxyCode}
