\subsection{rxiq\+\_\+siso\+\_\+ddr.\+vhd}
\label{rxiq__siso__ddr_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/rx\+\_\+path\+\_\+top/diq2fifo/synth/rxiq\+\_\+siso\+\_\+ddr.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/rx\+\_\+path\+\_\+top/diq2fifo/synth/rxiq\+\_\+siso\+\_\+ddr.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00002 \textcolor{keyword}{-- FILE:    rxiq\_siso\_ddr.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION: rxiq samples in SISO ddr mode}
00004 \textcolor{keyword}{-- DATE:    Jan 13, 2016}
00005 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00006 \textcolor{keyword}{-- REVISIONS:}
00007 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00008 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00009 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00010 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00011 
00012 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00013 \textcolor{keyword}{-- Entity declaration}
00014 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00015 \textcolor{keywordflow}{entity }rxiq_siso_ddr \textcolor{keywordflow}{is}
00016    \textcolor{keywordflow}{generic}\textcolor{vhdlchar}{(}
00017       \textcolor{vhdlchar}{iq_width}                  \textcolor{vhdlchar}{:} \textcolor{comment}{integer} \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{12}
00018    \textcolor{vhdlchar}{)};
00019   \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00020       \textcolor{vhdlchar}{clk}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00021       \textcolor{vhdlchar}{reset_n}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00022       \textcolor{vhdlchar}{fidm}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};\textcolor{keyword}{ -- External Frame ID mode. Frame start at fsync = 0, when 0. Frame start
       at fsync = 1, when 1.}
00023 \textcolor{keyword}{      --Rx interface data }
00024       \textcolor{vhdlchar}{DIQ_h}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00025         \textcolor{vhdlchar}{DIQ_l}          \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00026 \textcolor{keyword}{      --fifo ports }
00027       \textcolor{vhdlchar}{fifo_wfull}  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00028       \textcolor{vhdlchar}{fifo_wrreq}  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00029       \textcolor{vhdlchar}{fifo_wdata}  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{*}\textcolor{vhdllogic}{4-1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)}   
00030         \textcolor{vhdlchar}{)};
00031 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{rxiq\_siso\_ddr};
00032 
00033 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00034 \textcolor{keyword}{-- Architecture}
00035 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00036 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} rxiq_siso_ddr is
00037 \textcolor{keyword}{--declare signals,  components here}
00038 
00039 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{reg_h_0}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00040 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{reg_l_0}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00041 
00042 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{diq_pos0_reg}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00043 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{diq_pos1_reg}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00044 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{diq_pos2_reg}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00045 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{diq_pos3_reg}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00046 
00047 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{diq_pos0_1_cap_en}    \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00048 
00049 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{diq_valid}              \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00050 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{fifo_data}               \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{*}\textcolor{vhdllogic}{4-1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00051 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{fifo_data_valid}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00052 
00053  
00054 \textcolor{vhdlkeyword}{begin}
00055 
00056 
00057 \textcolor{vhdlchar}{diq_valid}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{reg_h_0}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{XNOR} \textcolor{vhdlchar}{DIQ_h}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{DIQ_h}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{XOR} \textcolor{vhdlchar}{
      DIQ_l}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{AND} 
00058                \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{reg_l_0}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{XNOR} \textcolor{vhdlchar}{DIQ_l}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{)};
00059 
00060 
00061  reg\_proc : \textcolor{keywordflow}{process}(reset_n, clk)
00062 \textcolor{vhdlkeyword}{    begin}
00063       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00064             reg\_h\_0<=(others=>'0');
00065          reg\_l\_0<=(others=>'0');
00066       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00067             reg\_h\_0<=DIQ\_h; 
00068          reg\_l\_0<=DIQ\_l; 
00069         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00070     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00071     
00072  diq\_pos0\_1\_cap\_en\_proc : \textcolor{keywordflow}{process}(reset_n, clk)
00073 \textcolor{vhdlkeyword}{    begin}
00074       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00075          \textcolor{vhdlchar}{diq_pos0_1_cap_en}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00076       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00077          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{diq_valid} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00078             \textcolor{vhdlchar}{diq_pos0_1_cap_en} \textcolor{vhdlchar}{<=} \textcolor{keywordflow}{not} \textcolor{vhdlchar}{diq_pos0_1_cap_en};
00079          \textcolor{keywordflow}{else} 
00080             \textcolor{vhdlchar}{diq_pos0_1_cap_en}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{diq_pos0_1_cap_en};
00081          \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00082         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00083     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00084     
00085 
00086 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00087 \textcolor{keyword}{-- To capture DIQ data in 0 position (frame start)}
00088 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00089  diq\_pos0\_reg\_proc : \textcolor{keywordflow}{process}(reset_n, clk)
00090 \textcolor{vhdlkeyword}{    begin}
00091       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00092          \textcolor{vhdlchar}{diq_pos0_reg}       \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00093       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00094             \textcolor{keywordflow}{if} \textcolor{vhdlchar}{DIQ_l}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{fidm} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{diq_valid}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{diq_pos0_1_cap_en}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00095             \textcolor{vhdlchar}{diq_pos0_reg}        \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{DIQ_l}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00096             \textcolor{keywordflow}{else} 
00097                 \textcolor{vhdlchar}{diq_pos0_reg}    \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{diq_pos0_reg};
00098             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if}; 
00099         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00100     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00101 
00102 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00103 \textcolor{keyword}{-- To capture DIQ data in 1 position}
00104 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00105  diq\_pos1\_reg\_proc : \textcolor{keywordflow}{process}(reset_n, clk)
00106 \textcolor{vhdlkeyword}{    begin}
00107       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00108          \textcolor{vhdlchar}{diq_pos1_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00109       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00110             \textcolor{keywordflow}{if} \textcolor{vhdlchar}{DIQ_h}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{keywordflow}{NOT} \textcolor{vhdlchar}{fidm} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{diq_valid}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{
      diq_pos0_1_cap_en}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00111             \textcolor{vhdlchar}{diq_pos1_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{DIQ_h}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00112             \textcolor{keywordflow}{else} 
00113                 \textcolor{vhdlchar}{diq_pos1_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{diq_pos1_reg};
00114             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if}; 
00115         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00116     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00117 
00118 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00119 \textcolor{keyword}{-- To capture DIQ data in 2 position (frame start)}
00120 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00121  diq\_pos2\_reg\_proc : \textcolor{keywordflow}{process}(reset_n, clk)
00122 \textcolor{vhdlkeyword}{    begin}
00123       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00124          \textcolor{vhdlchar}{diq_pos2_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00125       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00126             \textcolor{keywordflow}{if} \textcolor{vhdlchar}{DIQ_l}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{fidm} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{diq_valid}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{diq_pos0_1_cap_en}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00127             \textcolor{vhdlchar}{diq_pos2_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{DIQ_l}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00128             \textcolor{keywordflow}{else} 
00129                 \textcolor{vhdlchar}{diq_pos2_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{diq_pos2_reg};
00130             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if}; 
00131         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00132     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00133 
00134 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00135 \textcolor{keyword}{-- To capture DIQ data in 3 position}
00136 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00137 diq\_pos3\_reg\_proc : \textcolor{keywordflow}{process}(reset_n, clk)
00138 \textcolor{vhdlkeyword}{    begin}
00139       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00140          \textcolor{vhdlchar}{diq_pos3_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)}; 
00141       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00142             \textcolor{keywordflow}{if} \textcolor{vhdlchar}{DIQ_h}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{=} \textcolor{keywordflow}{NOT} \textcolor{vhdlchar}{fidm} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{diq_valid}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{
      diq_pos0_1_cap_en}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00143             \textcolor{vhdlchar}{diq_pos3_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{DIQ_h}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{iq_width}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00144             \textcolor{keywordflow}{else} 
00145                 \textcolor{vhdlchar}{diq_pos3_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{diq_pos3_reg};
00146             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if}; 
00147         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00148     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00149  
00150 
00151 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00152 \textcolor{keyword}{-- FIFO data and FIFO data valid signals}
00153 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00154 \textcolor{keyword}{--fifo\_data <= diq\_pos0\_reg & diq\_pos1\_reg & diq\_pos2\_reg & diq\_pos3\_reg;}
00155 \textcolor{vhdlchar}{fifo_data} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{diq_pos3_reg} \textcolor{vhdlchar}{&} \textcolor{vhdlchar}{diq_pos2_reg} \textcolor{vhdlchar}{&} \textcolor{vhdlchar}{diq_pos1_reg} \textcolor{vhdlchar}{&} \textcolor{vhdlchar}{diq_pos0_reg};
00156 
00157 fifo\_data\_valid\_proc : \textcolor{keywordflow}{process}(reset_n, clk)
00158 \textcolor{vhdlkeyword}{    begin}
00159       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00160          \textcolor{vhdlchar}{fifo_data_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}; 
00161       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00162             \textcolor{keywordflow}{if} \textcolor{vhdlchar}{diq_pos0_1_cap_en}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00163             \textcolor{vhdlchar}{fifo_data_valid} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'};
00164             \textcolor{keywordflow}{else} 
00165                 \textcolor{vhdlchar}{fifo_data_valid} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00166             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if}; 
00167         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00168     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00169     
00170     
00171 \textcolor{keyword}{--to external ports    }
00172 \textcolor{vhdlchar}{fifo_wdata} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{fifo_data};
00173 \textcolor{vhdlchar}{fifo_wrreq} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{fifo_data_valid} \textcolor{keywordflow}{AND} \textcolor{keywordflow}{NOT} \textcolor{vhdlchar}{fifo_wfull};
00174     
00175  
00176 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};   
00177 
00178 
00179 
00180 
00181 
00182 
00183 
\end{DoxyCode}
