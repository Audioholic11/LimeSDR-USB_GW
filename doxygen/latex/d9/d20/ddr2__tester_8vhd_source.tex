\subsection{ddr2\+\_\+tester.\+vhd}
\label{ddr2__tester_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/self\+\_\+test/ddr2\+\_\+tester.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/self\+\_\+test/ddr2\+\_\+tester.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00002 \textcolor{keyword}{-- FILE:    ddr2\_tester.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION: top module for testing ddr2 ram memory}
00004 \textcolor{keyword}{-- DATE:    Aug 19, 2016}
00005 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00006 \textcolor{keyword}{-- REVISIONS:}
00007 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00008 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00009 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00010 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00011 
00012 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00013 \textcolor{keyword}{-- Entity declaration}
00014 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00015 \textcolor{keywordflow}{entity }ddr2_tester \textcolor{keywordflow}{is}
00016   \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00017 
00018         \textcolor{vhdlchar}{global_reset_n}          \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00019         \textcolor{vhdlchar}{pll_ref_clk}             \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00020         \textcolor{vhdlchar}{soft_reset_n}            \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00021 \textcolor{vhdlkeyword}{        begin}\textcolor{vhdlchar}{\_test}              \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00022         \textcolor{vhdlchar}{insert_error}            \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00023 
00024 \textcolor{keyword}{      --DDR2 external memory signals    }
00025         \textcolor{vhdlchar}{mem_odt}                 \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00026         \textcolor{vhdlchar}{mem_cs_n}                    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00027         \textcolor{vhdlchar}{mem_cke}                 \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00028         \textcolor{vhdlchar}{mem_addr}                    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{12} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00029         \textcolor{vhdlchar}{mem_ba}                  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00030         \textcolor{vhdlchar}{mem_ras_n}               \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00031         \textcolor{vhdlchar}{mem_cas_n}               \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00032         \textcolor{vhdlchar}{mem_we_n}                    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00033         \textcolor{vhdlchar}{mem_dm}                  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00034         \textcolor{vhdlchar}{mem_clk}                 \textcolor{vhdlchar}{:} \textcolor{keywordflow}{inout} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00035         \textcolor{vhdlchar}{mem_clk_n}               \textcolor{vhdlchar}{:} \textcolor{keywordflow}{inout} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00036         \textcolor{vhdlchar}{mem_dq}                  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{inout} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00037         \textcolor{vhdlchar}{mem_dqs}                 \textcolor{vhdlchar}{:} \textcolor{keywordflow}{inout} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00038         
00039 \textcolor{keyword}{        --test results}
00040         \textcolor{vhdlchar}{pnf_per_bit}             \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00041         \textcolor{vhdlchar}{pnf_per_bit_persist}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00042         \textcolor{vhdlchar}{pass}                    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00043         \textcolor{vhdlchar}{fail}                    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}; 
00044         \textcolor{vhdlchar}{test_complete}           \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic} 
00045     
00046         
00047         
00048         \textcolor{vhdlchar}{)};
00049 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{ddr2\_tester};
00050 
00051 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00052 \textcolor{keyword}{-- Architecture}
00053 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00054 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} ddr2_tester is
00055 \textcolor{keyword}{--declare signals,  components here}
00056 \textcolor{keyword}{--avalon signals}
00057 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_ready}           \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00058 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_addr}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{24} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00059 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_size}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00060 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_wdata}           \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00061 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_rdata}\textcolor{vhdlchar}{,} \textcolor{vhdlchar}{avl_rdata_error}    \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00062 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_write_req}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00063 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_read_req}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00064 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_rdata_valid}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00065 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_be}              \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{3} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00066 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{avl_burstbegin}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};  
00067 
00068 \textcolor{keyword}{--phy interface}
00069 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{ddr2_phy_clk}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00070 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{local_init_done}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00071 
00072 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{begin_test_reg0}\textcolor{vhdlchar}{,} \textcolor{vhdlchar}{begin_test_reg1} \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00073 
00074 
00075 \textcolor{keywordflow}{component} ddr2 \textcolor{keywordflow}{IS}
00076     \textcolor{keywordflow}{PORT} (
00077         local_address       : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{24} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00078         local_write_req : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC};
00079         local_read_req      : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC};
00080         local_burstbegin    : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC};
00081         local_wdata         : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00082         local_be                : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{3} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00083         local_size          : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00084         global_reset_n      : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC};
00085         pll_ref_clk         : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC};
00086         soft_reset_n        : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC};
00087         local_ready         : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00088         local_rdata         : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00089         local_rdata_valid   : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00090         local_refresh_ack   : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00091         local_init_done : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00092         reset_phy_clk_n : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00093         mem_odt             : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00094         mem_cs_n                : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00095         mem_cke             : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00096         mem_addr                : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{12} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00097         mem_ba              : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00098         mem_ras_n           : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00099         mem_cas_n           : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00100         mem_we_n                : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00101         mem_dm              : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00102         phy_clk             : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00103         aux_full_rate_clk   : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00104         aux_half_rate_clk   : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00105         reset_request_n : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC};
00106         mem_clk             : \textcolor{keywordflow}{INOUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00107         mem_clk_n           : \textcolor{keywordflow}{INOUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00108         mem_dq              : \textcolor{keywordflow}{INOUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00109         mem_dqs             : \textcolor{keywordflow}{INOUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0})
00110     );
00111 \textcolor{keywordflow}{END} \textcolor{keywordflow}{component};
00112 
00113 
00114 \textcolor{keywordflow}{component} ddr2\_traffic\_gen \textcolor{keywordflow}{is}
00115     \textcolor{keywordflow}{port} (
00116         avl\_ready           : \textcolor{keywordflow}{in}  \textcolor{comment}{std\_logic}                     := '\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}';             \textcolor{keyword}{--      
       avl.waitrequest\_n}
00117         avl\_addr            : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{24} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});                    \textcolor{keyword}{--          .address}
00118         avl\_size            : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});                     \textcolor{keyword}{--          .burstcount}
00119         avl\_wdata           : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});                    \textcolor{keyword}{--          .writedata}
00120         avl\_rdata           : \textcolor{keywordflow}{in}  \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}) := (\textcolor{keywordflow}{others} => '\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}'); \textcolor{keyword}{--          .readdata}
00121         avl\_write\_req       : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};                                        \textcolor{keyword}{--          .write}
00122         avl\_read\_req        : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};                                        \textcolor{keyword}{--          .read}
00123         avl\_rdata\_valid     : \textcolor{keywordflow}{in}  \textcolor{comment}{std\_logic}                     := '\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}';             \textcolor{keyword}{--         
       .readdatavalid}
00124         avl\_be              : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{3} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});                     \textcolor{keyword}{--          .byteenable}
00125         avl\_burstbegin      : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};                                        \textcolor{keyword}{--         
       .beginbursttransfer}
00126         clk                 : \textcolor{keywordflow}{in}  \textcolor{comment}{std\_logic}                     := '\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}';             \textcolor{keyword}{-- avl\_clock.clk}
00127         reset\_n             : \textcolor{keywordflow}{in}  \textcolor{comment}{std\_logic}                     := '\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}';             \textcolor{keyword}{-- avl\_reset.reset\_n}
00128         pnf\_per\_bit         : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});                    \textcolor{keyword}{--      
       pnf.pnf\_per\_bit}
00129         pnf\_per\_bit\_persist : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});                    \textcolor{keyword}{--         
       .pnf\_per\_bit\_persist}
00130         pass                : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};                                        \textcolor{keyword}{--    status.pass}
00131         fail                : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};                                        \textcolor{keyword}{--          .fail}
00132         test\_complete       : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}\textcolor{keyword}{                                         --         
       .test\_complete}
00133     );
00134 \textcolor{keywordflow}{end} \textcolor{keywordflow}{component};
00135 
00136   
00137 \textcolor{vhdlkeyword}{begin}
00138 
00139 \textcolor{keywordflow}{process}(global_reset_n, pll_ref_clk)
00140 \textcolor{vhdlkeyword}{begin}
00141     \textcolor{keywordflow}{if} \textcolor{vhdlchar}{global_reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00142 \textcolor{vhdlkeyword}{        begin}\textcolor{vhdlchar}{\_test\_reg0}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00143 \textcolor{vhdlkeyword}{        begin}\textcolor{vhdlchar}{\_test\_reg1}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00144     \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{pll_ref_clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{pll_ref_clk}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00145 \textcolor{vhdlkeyword}{        begin}\textcolor{vhdlchar}{\_test\_reg0}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{begin_test};
00146 \textcolor{vhdlkeyword}{        begin}\textcolor{vhdlchar}{\_test\_reg1}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{begin_test_reg0};
00147     \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00148 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00149 
00150 ddr2_inst : ddr2
00151     \textcolor{keywordflow}{PORT} \textcolor{keywordflow}{map} (
00152         local_address       => avl_addr, 
00153         local_write_req => avl_write_req, 
00154         local_read_req      => avl_read_req, 
00155         local_burstbegin    => avl_burstbegin, 
00156         local_wdata         => avl_wdata, 
00157         local_be                => avl_be, 
00158         local_size          => avl_size, 
00159         global_reset_n      => global_reset_n, 
00160         pll_ref_clk         => pll_ref_clk, 
00161         soft_reset_n        => soft_reset_n, 
00162         local_ready         => avl_ready, 
00163         local_rdata         => avl_rdata, 
00164         local_rdata_valid   => avl_rdata_valid, 
00165         local_refresh_ack   => \textcolor{keywordflow}{open}, 
00166         local_init_done => local_init_done, 
00167         reset_phy_clk_n => \textcolor{keywordflow}{open}, 
00168         mem_odt             => mem_odt, 
00169         mem_cs_n                => mem_cs_n, 
00170         mem_cke             => mem_cke, 
00171         mem_addr                => mem_addr, 
00172         mem_ba              => mem_ba, 
00173         mem_ras_n           => mem_ras_n, 
00174         mem_cas_n           => mem_cas_n, 
00175         mem_we_n                => mem_we_n, 
00176         mem_dm              => mem_dm, 
00177         phy_clk             => ddr2_phy_clk, 
00178         aux_full_rate_clk   => \textcolor{keywordflow}{open}, 
00179         aux_half_rate_clk   => \textcolor{keywordflow}{open}, 
00180         reset_request_n => \textcolor{keywordflow}{open}, 
00181         mem_clk             => mem_clk, 
00182         mem_clk_n           => mem_clk_n, 
00183         mem_dq              => mem_dq, 
00184         mem_dqs             => mem_dqs 
00185     \textcolor{vhdlchar}{)};   
00186     
00187 traffic_gen_inst : ddr2\_traffic\_gen
00188     \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00189         avl\_ready               => avl_ready,
00190         avl\_addr                    => avl_addr,
00191         avl\_size                    => avl_size,
00192         avl\_wdata               => avl_wdata,
00193         avl\_rdata               => avl_rdata_error,\textcolor{keyword}{--avl\_rdata,}
00194         avl\_write\_req           => avl_write_req,
00195         avl\_read\_req            => avl_read_req,
00196         avl\_rdata\_valid     => avl_rdata_valid,
00197         avl\_be                  => avl_be,
00198         avl\_burstbegin          => avl_burstbegin,
00199         clk                     => ddr2_phy_clk,
00200         reset\_n                 => local_init_done,
00201         pnf\_per\_bit             => pnf_per_bit,
00202         pnf\_per\_bit\_persist => pnf_per_bit_persist,
00203         pass                        => pass,
00204         fail                        => fail,
00205         test\_complete           => test_complete 
00206     \textcolor{vhdlchar}{)};  
00207     
00208     \textcolor{vhdlchar}{avl_rdata_error}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{avl_rdata}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{insert_error}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} \textcolor{vhdlchar}{
      avl_rdata};
00209   
00210 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};
00211 
00212 
00213 
00214 
00215 
\end{DoxyCode}
