\subsection{ddr2\+\_\+data\+\_\+check.\+vhd}
\label{ddr2__data__check_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/wfm\+\_\+ram\+\_\+buffer/ddr2\+\_\+data\+\_\+check.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/wfm\+\_\+ram\+\_\+buffer/ddr2\+\_\+data\+\_\+check.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00002 \textcolor{keyword}{-- FILE:    ddr2\_data\_check.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION: describe}
00004 \textcolor{keyword}{-- DATE:    June 16, 2016}
00005 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00006 \textcolor{keyword}{-- REVISIONS:}
00007 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00008 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00009 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00010 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00011 
00012 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00013 \textcolor{keyword}{-- Entity declaration}
00014 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00015 \textcolor{keywordflow}{entity }ddr2_data_check \textcolor{keywordflow}{is}
00016     \textcolor{keywordflow}{generic}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data_w}      \textcolor{vhdlchar}{:} \textcolor{comment}{integer} \textcolor{vhdlchar}{:=}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{32}
00017             \textcolor{vhdlchar}{)};
00018   \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00019 \textcolor{keyword}{      --input ports }
00020       \textcolor{vhdlchar}{clk}               \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00021       \textcolor{vhdlchar}{reset_n}           \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00022         \textcolor{vhdlchar}{data_in}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data_w}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00023         \textcolor{vhdlchar}{datain_valid}    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00024         \textcolor{vhdlchar}{current_match}   \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00025         \textcolor{vhdlchar}{all_match}       \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic} 
00026 
00027         \textcolor{vhdlchar}{)};
00028 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{ddr2\_data\_check};
00029 
00030 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00031 \textcolor{keyword}{-- Architecture}
00032 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00033 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} ddr2_data_check is
00034 \textcolor{keyword}{--declare signals,  components here}
00035 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{lfsr_data}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{data_w}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00036 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{current_match_s}  \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00037 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{all_match_s}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic}; 
00038 
00039 \textcolor{keywordflow}{component} LFSR \textcolor{keywordflow}{is}
00040     \textcolor{keywordflow}{generic}(
00041             reg_with    : \textcolor{comment}{integer} := \textcolor{vhdllogic}{}\textcolor{vhdllogic}{32};
00042             seed        : \textcolor{comment}{integer} := \textcolor{vhdllogic}{}\textcolor{vhdllogic}{32}\textcolor{keyword}{ --starting seed}
00043 );
00044     \textcolor{keywordflow}{port} (
00045       clk           : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00046       reset_n       : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00047         en              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00048         data            : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(reg_with\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0})     
00049         );
00050 \textcolor{keywordflow}{end} \textcolor{keywordflow}{component};
00051 
00052   
00053 \textcolor{vhdlkeyword}{begin}
00054 
00055 
00056 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00057 \textcolor{keyword}{-- LFSR instance}
00058 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00059 lfsr_inst : LFSR
00060     \textcolor{keywordflow}{generic} \textcolor{keywordflow}{map}(
00061             reg_with    => data_w,
00062             seed        => \textcolor{vhdllogic}{32} \textcolor{keyword}{--starting seed}
00063 \textcolor{vhdlchar}{)}
00064     \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00065       clk           => clk, 
00066       reset_n       => reset_n, 
00067         en              => datain_valid, 
00068         data            => lfsr_data     
00069         \textcolor{vhdlchar}{)};
00070 
00071 
00072   \textcolor{keywordflow}{process}(reset_n, clk)
00073 \textcolor{vhdlkeyword}{    begin}
00074       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00075         \textcolor{vhdlchar}{current_match_s}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}; 
00076       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00077           \textcolor{keywordflow}{if} \textcolor{vhdlchar}{datain_valid}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00078                 \textcolor{keywordflow}{if}  \textcolor{vhdlchar}{lfsr_data}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{data_in} \textcolor{keywordflow}{then}
00079                     \textcolor{vhdlchar}{current_match_s}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'};
00080                 \textcolor{keywordflow}{else} 
00081                     \textcolor{vhdlchar}{current_match_s}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00082                 \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00083             \textcolor{keywordflow}{else} 
00084                 \textcolor{vhdlchar}{current_match_s}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{current_match_s};
00085             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00086         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00087     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00088 
00089 
00090   \textcolor{keywordflow}{process}(reset_n, clk)
00091 \textcolor{vhdlkeyword}{    begin}
00092       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00093         \textcolor{vhdlchar}{all_match_s}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}; 
00094       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00095           \textcolor{keywordflow}{if} \textcolor{vhdlchar}{current_match_s}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00096                 \textcolor{vhdlchar}{all_match_s}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00097             \textcolor{keywordflow}{else} 
00098                 \textcolor{vhdlchar}{all_match_s}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{all_match_s};
00099             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00100         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00101     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00102 
00103 \textcolor{vhdlchar}{all_match}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{all_match_s};
00104 
00105 \textcolor{vhdlchar}{current_match}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{current_match_s};
00106   
00107 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};   
00108 
00109 
00110 
00111 
00112 
\end{DoxyCode}
