\subsection{gpio\+\_\+chirp\+\_\+sync\+\_\+top\+\_\+tb.\+vhd}
\label{gpio__chirp__sync__top__tb_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/gpio\+\_\+chirp\+\_\+sync/sim/gpio\+\_\+chirp\+\_\+sync\+\_\+top\+\_\+tb.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/gpio\+\_\+chirp\+\_\+sync/sim/gpio\+\_\+chirp\+\_\+sync\+\_\+top\+\_\+tb.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00002 \textcolor{keyword}{-- FILE:    gpio\_sync\_top\_tb.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION:  }
00004 \textcolor{keyword}{-- DATE:    July 1, 2018}
00005 \textcolor{keyword}{-- AUTHOR(s):   Erik Moore DU2SRI}
00006 \textcolor{keyword}{-- REVISIONS:}
00007 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00008 
00009 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00010 \textcolor{keyword}{-- Notes: To Sync with external square signal on the rising edge}
00011 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00012 
00013 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00014 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00015 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00016 
00017 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00018 \textcolor{keyword}{-- Entity declaration}
00019 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00020 \textcolor{keywordflow}{entity }gpio_chirp_sync_top_tb \textcolor{keywordflow}{is}
00021 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{gpio\_chirp\_sync\_top\_tb};
00022 
00023 
00024 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00025 \textcolor{keyword}{-- Architecture}
00026 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00027 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} gpio_chirp_sync_top_tb is
00028 
00029     \textcolor{keywordflow}{constant} \textcolor{vhdlchar}{clk_period}     \textcolor{vhdlchar}{:} \textcolor{comment}{time} \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{50} \textcolor{vhdlchar}{ns};
00030     \textcolor{keywordflow}{constant} \textcolor{vhdlchar}{chirp_period}   \textcolor{vhdlchar}{:} \textcolor{comment}{time} \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{10} \textcolor{vhdlchar}{us};
00031 
00032     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_clk}                \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00033     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_reset_n}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic} \textcolor{vhdlchar}{:=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'};
00034     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_chirp_sig}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00035     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{w_sync_period}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00036     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{w_chirp_trig}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00037     
00038     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{w_testout}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00039     
00040     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_sample_width}   \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{"10"};
00041     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_mode}               \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic} \textcolor{vhdlchar}{:=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00042     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_trxiqpulse}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic} \textcolor{vhdlchar}{:=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00043     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_ddr_en}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic} \textcolor{vhdlchar}{:=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00044     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_mimo_en}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic} \textcolor{vhdlchar}{:=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00045     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_ch_en}              \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{"10"};
00046     \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{r_chirp_sync_en}  \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic} \textcolor{vhdlchar}{:=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'};
00047 
00048 
00049     \textcolor{keywordflow}{component} gpio_chirp_sync_top \textcolor{keywordflow}{is}
00050     \textcolor{keywordflow}{generic} (
00051     chirp_sync_width        : \textcolor{comment}{integer} := \textcolor{vhdllogic}{}\textcolor{vhdllogic}{64}\textcolor{keyword}{ --bus width in bits }
00052     );
00053 
00054     \textcolor{keywordflow}{port} (
00055         clk                 : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00056         counter_clk             : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00057         reset_n             : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00058 
00059 \textcolor{keyword}{        -- Chirp Sync I/Os}
00060         chirp_sig               : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00061         sync_period             : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00062         chirp_trig              : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00063     
00064         TESTOUT                 : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00065             
00066 \textcolor{keyword}{        --Mode settings}
00067         sample_width         : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}); \textcolor{keyword}{--"10"-12bit, "01"-14bit, "00"-16bit;}
00068         mode                 : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic}; \textcolor{keyword}{-- JESD207: 1; TRXIQ: 0}
00069         trxiqpulse           : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic}; \textcolor{keyword}{-- trxiqpulse on: 1; trxiqpulse off: 0}
00070         ddr_en               : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic}; \textcolor{keyword}{-- DDR: 1; SDR: 0}
00071         mimo_en              : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic}; \textcolor{keyword}{-- SISO: 1; MIMO: 0}
00072         ch_en                : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}(\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}); \textcolor{keyword}{--"01" - Ch. A, "10" - Ch. B, "11" - Ch. A
       and Ch. B. }
00073         chirp_sync_en           : \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic}\textcolor{keyword}{  -- chirp sync enable}
00074     );
00075     \textcolor{keywordflow}{end} \textcolor{keywordflow}{component} \textcolor{vhdlchar}{gpio_chirp_sync_top};
00076     
00077 \textcolor{vhdlkeyword}{begin}
00078 
00079 \textcolor{keyword}{--clock}
00080 clock: \textcolor{keywordflow}{process} \textcolor{keywordflow}{is}
00081 \textcolor{vhdlkeyword}{begin}
00082     \textcolor{vhdlchar}{r_clk} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdlchar}{clk_period}\textcolor{vhdlchar}{/}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2};
00083     \textcolor{vhdlchar}{r_clk} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdlchar}{clk_period}\textcolor{vhdlchar}{/}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2};
00084 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process} \textcolor{vhdlchar}{clock};
00085 
00086 \textcolor{keyword}{--reset}
00087 res: \textcolor{keywordflow}{process} \textcolor{keywordflow}{is}
00088 \textcolor{vhdlkeyword}{begin}
00089     \textcolor{vhdlchar}{r_reset_n} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdlchar}{clk_period}\textcolor{vhdlchar}{*}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2};
00090     \textcolor{vhdlchar}{r_reset_n} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait};
00091 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process} \textcolor{vhdlchar}{res};
00092 
00093 gpio\_chirp\_sync\_top\_INST : gpio_chirp_sync_top
00094     \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00095         clk                 => r_clk,
00096         counter_clk             => r_clk,
00097         reset_n             => r_reset_n,
00098 
00099 \textcolor{keyword}{        -- Chirp Sync I/Os}
00100         chirp_sig               => r_chirp_sig,
00101         sync_period             => w_sync_period,
00102         chirp_trig              => w_chirp_trig,
00103         
00104         TESTOUT                 => w_testout,
00105             
00106 \textcolor{keyword}{        --Mode settings}
00107         sample_width         => r_sample_width,
00108         mode                 => r_mode,
00109         trxiqpulse           => r_trxiqpulse,
00110         ddr_en               => r_ddr_en,
00111         mimo_en              => r_mimo_en,
00112         ch_en                => r_ch_en,
00113         chirp_sync_en           => r_chirp_sync_en
00114     \textcolor{vhdlchar}{)};
00115     
00116     
00117     
00118 chirp\_sig\_input: \textcolor{keywordflow}{process} \textcolor{keywordflow}{is}
00119 \textcolor{vhdlkeyword}{begin}
00120     \textcolor{vhdlchar}{r_chirp_sig} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdlchar}{chirp_period}\textcolor{vhdlchar}{/}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2};
00121      \textcolor{vhdlchar}{r_chirp_sig} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}; \textcolor{keywordflow}{wait} \textcolor{keywordflow}{for} \textcolor{vhdlchar}{chirp_period}\textcolor{vhdlchar}{/}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2};
00122 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process} \textcolor{vhdlchar}{chirp\_sig\_input};
00123 
00124 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};   
\end{DoxyCode}
