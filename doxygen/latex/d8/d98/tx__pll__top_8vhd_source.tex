\subsection{tx\+\_\+pll\+\_\+top.\+vhd}
\label{tx__pll__top_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+pll\+\_\+top/synth/tx\+\_\+pll\+\_\+top.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+pll\+\_\+top/synth/tx\+\_\+pll\+\_\+top.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{----------------------------------------------------------------------------}
00002 \textcolor{keyword}{-- FILE: tx\_pll\_top.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION:top file for tx\_pll modules}
00004 \textcolor{keyword}{-- DATE:Jan 27, 2016}
00005 \textcolor{keyword}{-- AUTHOR(s):Lime Microsystems}
00006 \textcolor{keyword}{-- REVISIONS:}
00007 \textcolor{keyword}{----------------------------------------------------------------------------}
00008 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00009 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00010 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00011 
00012 \textcolor{vhdlkeyword}{LIBRARY }\textcolor{keywordflow}{altera\_mf};
00013 \textcolor{vhdlkeyword}{USE }\textcolor{keywordflow}{altera\_mf.all};
00014 \textcolor{vhdlkeyword}{USE }altera\_mf.altera\_mf\_components.\textcolor{keywordflow}{all};
00015 
00016 \textcolor{keyword}{----------------------------------------------------------------------------}
00017 \textcolor{keyword}{-- Entity declaration}
00018 \textcolor{keyword}{----------------------------------------------------------------------------}
00019 \textcolor{keywordflow}{entity }tx_pll_top \textcolor{keywordflow}{is}
00020    \textcolor{keywordflow}{generic}\textcolor{vhdlchar}{(}
00021       \textcolor{vhdlchar}{bandwidth_type}          \textcolor{vhdlchar}{:} \textcolor{comment}{STRING}    \textcolor{vhdlchar}{:=} \textcolor{keyword}{"AUTO"};
00022       \textcolor{vhdlchar}{clk0_divide_by}          \textcolor{vhdlchar}{:} \textcolor{comment}{NATURAL}   \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{1};
00023       \textcolor{vhdlchar}{clk0_duty_cycle}         \textcolor{vhdlchar}{:} \textcolor{comment}{NATURAL}   \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{50};
00024       \textcolor{vhdlchar}{clk0_multiply_by}        \textcolor{vhdlchar}{:} \textcolor{comment}{NATURAL}   \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{1};
00025       \textcolor{vhdlchar}{clk0_phase_shift}        \textcolor{vhdlchar}{:} \textcolor{comment}{STRING}    \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{"0"};
00026       \textcolor{vhdlchar}{clk1_divide_by}          \textcolor{vhdlchar}{:} \textcolor{comment}{NATURAL}   \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{1};
00027       \textcolor{vhdlchar}{clk1_duty_cycle}         \textcolor{vhdlchar}{:} \textcolor{comment}{NATURAL}   \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{50};
00028       \textcolor{vhdlchar}{clk1_multiply_by}        \textcolor{vhdlchar}{:} \textcolor{comment}{NATURAL}   \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{1};
00029       \textcolor{vhdlchar}{clk1_phase_shift}        \textcolor{vhdlchar}{:} \textcolor{comment}{STRING}    \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{"0"};
00030       \textcolor{vhdlchar}{compensate_clock}        \textcolor{vhdlchar}{:} \textcolor{comment}{STRING}    \textcolor{vhdlchar}{:=} \textcolor{keyword}{"CLK1"};
00031       \textcolor{vhdlchar}{inclk0_input_frequency}  \textcolor{vhdlchar}{:} \textcolor{comment}{NATURAL}   \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{6250};
00032       \textcolor{vhdlchar}{intended_device_family}  \textcolor{vhdlchar}{:} \textcolor{comment}{STRING}    \textcolor{vhdlchar}{:=} \textcolor{keyword}{"Cyclone IV E"};
00033       \textcolor{vhdlchar}{operation_mode}          \textcolor{vhdlchar}{:} \textcolor{comment}{STRING}    \textcolor{vhdlchar}{:=} \textcolor{keyword}{"SOURCE\_SYNCHRONOUS"};
00034       \textcolor{vhdlchar}{scan_chain_mif_file}     \textcolor{vhdlchar}{:} \textcolor{comment}{STRING}    \textcolor{vhdlchar}{:=} \textcolor{keyword}{"ip/txpll/pll.mif"};
00035       \textcolor{vhdlchar}{drct_c0_ndly}            \textcolor{vhdlchar}{:} \textcolor{comment}{integer}   \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{1};
00036       \textcolor{vhdlchar}{drct_c1_ndly}            \textcolor{vhdlchar}{:} \textcolor{comment}{integer}   \textcolor{vhdlchar}{:=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{2}
00037    \textcolor{vhdlchar}{)};
00038    \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00039 \textcolor{keyword}{   --PLL input }
00040    \textcolor{vhdlchar}{pll_inclk}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00041    \textcolor{vhdlchar}{pll_areset}        \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00042    \textcolor{vhdlchar}{pll_logic_reset_n} \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00043    \textcolor{vhdlchar}{inv_c0}            \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00044    \textcolor{vhdlchar}{c0}                \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};\textcolor{keyword}{ --muxed clock output}
00045    \textcolor{vhdlchar}{c1}                \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};\textcolor{keyword}{ --muxed clock output}
00046    \textcolor{vhdlchar}{pll_locked}        \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00047 \textcolor{keyword}{   --Bypass control}
00048    \textcolor{vhdlchar}{clk_ena}           \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};\textcolor{keyword}{ --clock output enable}
00049    \textcolor{vhdlchar}{drct_clk_en}       \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};\textcolor{keyword}{ --1- Direct clk, 0 - PLL clocks }
00050 \textcolor{keyword}{   --Reconfiguration ports}
00051    \textcolor{vhdlchar}{rcnfg_clk}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00052    \textcolor{vhdlchar}{rcnfig_areset}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00053    \textcolor{vhdlchar}{rcnfig_en}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00054    \textcolor{vhdlchar}{rcnfig_data}       \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{143} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00055    \textcolor{vhdlchar}{rcnfig_status}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00056 \textcolor{keyword}{   --Dynamic phase shift ports}
00057    \textcolor{vhdlchar}{dynps_areset_n}    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00058    \textcolor{vhdlchar}{dynps_mode}        \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};\textcolor{keyword}{ -- 0 - manual, 1 - auto}
00059    \textcolor{vhdlchar}{dynps_en}          \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00060    \textcolor{vhdlchar}{dynps_tst}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00061    \textcolor{vhdlchar}{dynps_dir}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00062    \textcolor{vhdlchar}{dynps_cnt_sel}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00063 \textcolor{keyword}{   -- max phase steps in auto mode, phase steps to shift in manual mode}
00064    \textcolor{vhdlchar}{dynps_phase}       \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{9} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00065    \textcolor{vhdlchar}{dynps_step_size}   \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{9} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00066    \textcolor{vhdlchar}{dynps_busy}        \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00067    \textcolor{vhdlchar}{dynps_done}        \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00068    \textcolor{vhdlchar}{dynps_status}      \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00069 \textcolor{keyword}{   --signals from sample compare module (required for automatic phase searching)}
00070    \textcolor{vhdlchar}{smpl_cmp_en}       \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00071    \textcolor{vhdlchar}{smpl_cmp_done}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00072    \textcolor{vhdlchar}{smpl_cmp_error}    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00073 \textcolor{keyword}{   --Overall configuration PLL status}
00074    \textcolor{vhdlchar}{busy}              \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}
00075    
00076    \textcolor{vhdlchar}{)};
00077 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{tx\_pll\_top};
00078 
00079 \textcolor{keyword}{----------------------------------------------------------------------------}
00080 \textcolor{keyword}{-- Architecture}
00081 \textcolor{keyword}{----------------------------------------------------------------------------}
00082 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} tx_pll_top is
00083 \textcolor{keyword}{--declare signals,  components here}
00084 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{pll_areset_n}              \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00085 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{pll_inclk_global}          \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00086 
00087 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{c0_global}                 \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00088 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{c1_global}                 \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00089       
00090 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{rcnfig_en_sync}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00091 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{rcnfig_data_sync}          \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{143} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00092 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{rcnfig_areset_sync}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00093 
00094 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dynps_areset_n_sync}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00095 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dynps_en_sync}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00096 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dynps_dir_sync}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00097 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dynps_cnt_sel_sync}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00098 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dynps_phase_sync}          \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{9} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00099 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dynps_step_size_sync}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{9} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00100 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{rcnfig_en_sync_scanclk}    \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00101 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dynps_mode_sync}           \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00102 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{dynps_tst_sync}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00103 
00104 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{smpl_cmp_done_sync}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic}; 
00105 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{smpl_cmp_error_sync}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00106 
00107       
00108 \textcolor{keyword}{--inst0     }
00109 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst0_wr_rom}              \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00110 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst0_reconfig}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00111 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst0_config_data}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00112 \textcolor{keyword}{--inst1}
00113 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_busy}                \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00114 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_pll_areset}          \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00115 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_pll_configupdate}    \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00116 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_pll_scanclk}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00117 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_pll_scanclkena}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00118 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_pll_scandata}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00119 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_rom_address_out}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{7} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00120 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_write_rom_ena}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00121 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_pll_areset_in}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00122 \textcolor{keyword}{-- inst2}
00123 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst2_pll_phasestep}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00124 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst2_ps_status}           \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00125 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst2_ps_busy}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00126 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst2_ps_done}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00127 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst2_pll_reset_req}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00128 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst2_pll_phasecounterselect} \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00129 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst2_pll_phaseupdown}        \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic}; 
00130 
00131 \textcolor{keyword}{--inst3}
00132 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst3_inclk}               \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00133 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst3_clk}                 \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{4} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00134 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst3_locked}              \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00135 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst3_locked_scanclk}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00136 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst3_phasedone}           \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00137 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst3_scandataout}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00138 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst3_scandone}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00139 
00140 \textcolor{keyword}{--isnt4}
00141 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst4_rcfig_complete}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00142 
00143 \textcolor{keyword}{--inst5}
00144 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst5_c0_pol_h}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00145 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst5_c0_pol_l}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00146 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst5_dataout}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00147 
00148 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{drct_c0_dly_chain}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{drct_c0_ndly}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00149 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{drct_c1_dly_chain}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{drct_c1_ndly}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00150 
00151 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{c0_mux}\textcolor{vhdlchar}{,} \textcolor{vhdlchar}{c1_mux}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00152 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{locked_mux}                \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00153 
00154 \textcolor{keywordflow}{component} clkctrl \textcolor{keywordflow}{is}
00155    \textcolor{keywordflow}{port} (
00156       inclk  : \textcolor{keywordflow}{in}  \textcolor{comment}{std\_logic} := '\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}'; \textcolor{keyword}{--  altclkctrl\_input.inclk}
00157       ena    : \textcolor{keywordflow}{in}  \textcolor{comment}{std\_logic} := '\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}'; \textcolor{keyword}{--                  .ena}
00158       outclk : \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}\textcolor{keyword}{         -- altclkctrl\_output.outclk}
00159 );
00160 \textcolor{keywordflow}{end} \textcolor{keywordflow}{component};
00161 
00162 \textcolor{keywordflow}{COMPONENT} altpll
00163    \textcolor{keywordflow}{GENERIC} (
00164       bandwidth\_type          : \textcolor{comment}{STRING};
00165       clk0\_divide\_by          : \textcolor{comment}{NATURAL};
00166       clk0\_duty\_cycle         : \textcolor{comment}{NATURAL};
00167       clk0\_multiply\_by        : \textcolor{comment}{NATURAL};
00168       clk0\_phase\_shift        : \textcolor{comment}{STRING};
00169       clk1\_divide\_by          : \textcolor{comment}{NATURAL};
00170       clk1\_duty\_cycle         : \textcolor{comment}{NATURAL};
00171       clk1\_multiply\_by        : \textcolor{comment}{NATURAL};
00172       clk1\_phase\_shift        : \textcolor{comment}{STRING};
00173       compensate\_clock        : \textcolor{comment}{STRING};
00174       inclk0\_input\_frequency  : \textcolor{comment}{NATURAL};
00175       intended\_device\_family  : \textcolor{comment}{STRING};
00176       lpm\_hint                : \textcolor{comment}{STRING};
00177       lpm\_type                : \textcolor{comment}{STRING};
00178       operation\_mode          : \textcolor{comment}{STRING};
00179       pll\_type                : \textcolor{comment}{STRING};
00180       port\_activeclock        : \textcolor{comment}{STRING};
00181       port\_areset             : \textcolor{comment}{STRING};
00182       port\_clkbad0            : \textcolor{comment}{STRING};
00183       port\_clkbad1            : \textcolor{comment}{STRING};
00184       port\_clkloss            : \textcolor{comment}{STRING};
00185       port\_clkswitch          : \textcolor{comment}{STRING};
00186       port\_configupdate       : \textcolor{comment}{STRING};
00187       port\_fbin               : \textcolor{comment}{STRING};
00188       port\_inclk0             : \textcolor{comment}{STRING};
00189       port\_inclk1             : \textcolor{comment}{STRING};
00190       port\_locked             : \textcolor{comment}{STRING};
00191       port\_pfdena             : \textcolor{comment}{STRING};
00192       port\_phasecounterselect : \textcolor{comment}{STRING};
00193       port\_phasedone          : \textcolor{comment}{STRING};
00194       port\_phasestep          : \textcolor{comment}{STRING};
00195       port\_phaseupdown        : \textcolor{comment}{STRING};
00196       port\_pllena             : \textcolor{comment}{STRING};
00197       port\_scanaclr           : \textcolor{comment}{STRING};
00198       port\_scanclk            : \textcolor{comment}{STRING};
00199       port\_scanclkena         : \textcolor{comment}{STRING};
00200       port\_scandata           : \textcolor{comment}{STRING};
00201       port\_scandataout        : \textcolor{comment}{STRING};
00202       port\_scandone           : \textcolor{comment}{STRING};
00203       port\_scanread           : \textcolor{comment}{STRING};
00204       port\_scanwrite          : \textcolor{comment}{STRING};
00205       port\_clk0               : \textcolor{comment}{STRING};
00206       port\_clk1               : \textcolor{comment}{STRING};
00207       port\_clk2               : \textcolor{comment}{STRING};
00208       port\_clk3               : \textcolor{comment}{STRING};
00209       port\_clk4               : \textcolor{comment}{STRING};
00210       port\_clk5               : \textcolor{comment}{STRING};
00211       port\_clkena0            : \textcolor{comment}{STRING};
00212       port\_clkena1            : \textcolor{comment}{STRING};
00213       port\_clkena2            : \textcolor{comment}{STRING};
00214       port\_clkena3            : \textcolor{comment}{STRING};
00215       port\_clkena4            : \textcolor{comment}{STRING};
00216       port\_clkena5            : \textcolor{comment}{STRING};
00217       port\_extclk0            : \textcolor{comment}{STRING};
00218       port\_extclk1            : \textcolor{comment}{STRING};
00219       port\_extclk2            : \textcolor{comment}{STRING};
00220       port\_extclk3            : \textcolor{comment}{STRING};
00221       self\_reset\_on\_loss\_lock : \textcolor{comment}{STRING};
00222       width\_clock             : \textcolor{comment}{NATURAL};
00223       width\_phasecounterselect: \textcolor{comment}{NATURAL};
00224       scan\_chain\_mif\_file     : \textcolor{comment}{STRING}
00225    );
00226 \textcolor{keywordflow}{PORT} (
00227       areset               : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC} ;
00228       configupdate         : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC} ;
00229       inclk                : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00230       pfdena               : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC} ;
00231       phasecounterselect   : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00232       phasestep            : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC} ;
00233       phaseupdown          : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC} ;
00234       scanclk              : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC} ;
00235       scanclkena           : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC} ;
00236       scandata             : \textcolor{keywordflow}{IN} \textcolor{comment}{STD\_LOGIC} ;
00237       clk                  : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC\_VECTOR} (\textcolor{vhdllogic}{}\textcolor{vhdllogic}{4} \textcolor{keywordflow}{DOWNTO} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0});
00238       locked               : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC} ;
00239       phasedone            : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC} ;
00240       scandataout          : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC} ;
00241       scandone             : \textcolor{keywordflow}{OUT} \textcolor{comment}{STD\_LOGIC} 
00242 );
00243 \textcolor{keywordflow}{END} \textcolor{keywordflow}{COMPONENT};
00244 
00245 
00246 \textcolor{vhdlkeyword}{begin}
00247    
00248 \textcolor{vhdlchar}{pll_areset_n}   \textcolor{vhdlchar}{<=} \textcolor{keywordflow}{not} \textcolor{vhdlchar}{pll_areset};
00249    
00250 \textcolor{keyword}{----------------------------------------------------------------------------}
00251 \textcolor{keyword}{-- Synchronization registers}
00252 \textcolor{keyword}{----------------------------------------------------------------------------  }
00253  sync\_reg0 : \textcolor{keywordflow}{entity} work.sync_reg 
00254  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(rcnfg_clk, pll_logic_reset_n, rcnfig_en, rcnfig_en_sync\textcolor{vhdlchar}{)}; 
00255  
00256  sync\_reg1 : \textcolor{keywordflow}{entity} work.sync_reg 
00257  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, dynps_en, dynps_en_sync\textcolor{vhdlchar}{)}; 
00258  
00259  sync\_reg2 : \textcolor{keywordflow}{entity} work.sync_reg 
00260  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, dynps_dir, dynps_dir_sync\textcolor{vhdlchar}{)}; 
00261  
00262  sync\_reg3 : \textcolor{keywordflow}{entity} work.sync_reg 
00263  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, rcnfig_en, 
      rcnfig_en_sync_scanclk\textcolor{vhdlchar}{)};
00264  
00265  sync\_reg4 : \textcolor{keywordflow}{entity} work.sync_reg 
00266  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, dynps_mode, dynps_mode_sync\textcolor{vhdlchar}{)};
00267  
00268  sync\_reg5 : \textcolor{keywordflow}{entity} work.sync_reg 
00269  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, smpl_cmp_done, 
      smpl_cmp_done_sync\textcolor{vhdlchar}{)};
00270 
00271  sync\_reg6 : \textcolor{keywordflow}{entity} work.sync_reg 
00272  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, smpl_cmp_error, 
      smpl_cmp_error_sync\textcolor{vhdlchar}{)};
00273  
00274  sync\_reg7 : \textcolor{keywordflow}{entity} work.sync_reg 
00275  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, dynps_areset_n, 
      dynps_areset_n_sync\textcolor{vhdlchar}{)};
00276  
00277  sync\_reg8 : \textcolor{keywordflow}{entity} work.sync_reg 
00278  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(rcnfg_clk, pll_logic_reset_n, rcnfig_areset, rcnfig_areset_sync\textcolor{vhdlchar}{)};
00279  
00280  sync\_reg9 : \textcolor{keywordflow}{entity} work.sync_reg 
00281  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, dynps_tst, dynps_tst_sync\textcolor{vhdlchar}{)};
00282  
00283  sync\_reg10 : \textcolor{keywordflow}{entity} work.sync_reg 
00284  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, inst3_locked, 
      inst3_locked_scanclk\textcolor{vhdlchar}{)};
00285  
00286    
00287  bus\_sync\_reg0 : \textcolor{keywordflow}{entity} work.bus_sync_reg
00288  \textcolor{keywordflow}{generic} \textcolor{keywordflow}{map} (\textcolor{vhdllogic}{144}\textcolor{vhdlchar}{)} 
00289  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(rcnfg_clk, pll_logic_reset_n, rcnfig_data, rcnfig_data_sync\textcolor{vhdlchar}{)};
00290  
00291  bus\_sync\_reg1 : \textcolor{keywordflow}{entity} work.bus_sync_reg
00292  \textcolor{keywordflow}{generic} \textcolor{keywordflow}{map} (\textcolor{vhdllogic}{3}\textcolor{vhdlchar}{)} 
00293  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, dynps_cnt_sel, 
      dynps_cnt_sel_sync\textcolor{vhdlchar}{)};
00294  
00295  bus\_sync\_reg2 : \textcolor{keywordflow}{entity} work.bus_sync_reg
00296  \textcolor{keywordflow}{generic} \textcolor{keywordflow}{map} (\textcolor{vhdllogic}{10}\textcolor{vhdlchar}{)} 
00297  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, dynps_phase, dynps_phase_sync\textcolor{vhdlchar}{)};
00298  
00299   bus\_sync\_reg3 : \textcolor{keywordflow}{entity} work.bus_sync_reg
00300  \textcolor{keywordflow}{generic} \textcolor{keywordflow}{map} (\textcolor{vhdllogic}{10}\textcolor{vhdlchar}{)} 
00301  \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(inst1_pll_scanclk, pll_logic_reset_n, dynps_step_size, 
      dynps_step_size_sync\textcolor{vhdlchar}{)};
00302  
00303 \textcolor{keyword}{----------------------------------------------------------------------------}
00304 \textcolor{keyword}{-- pll\_reconfig\_module controller instance}
00305 \textcolor{keyword}{----------------------------------------------------------------------------}
00306 config\_ctrl\_inst0 : \textcolor{keywordflow}{entity} work.config_ctrl
00307 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00308       clk         => rcnfg_clk,
00309       rst         => rcnfig_areset_sync,
00310       busy        => inst1_busy,
00311       addr        => inst1_rom_address_out,
00312       rd_data     => inst1_write_rom_ena,
00313       spi_data    => rcnfig_data_sync,
00314       en_config   => rcnfig_en_sync,
00315       en_clk      => \textcolor{keywordflow}{open},
00316       wr_rom      => inst0_wr_rom,
00317       reconfig    => inst0_reconfig,
00318       config_data => inst0_config_data
00319 \textcolor{vhdlchar}{)};
00320  
00321 \textcolor{keyword}{----------------------------------------------------------------------------}
00322 \textcolor{keyword}{-- pll\_reconfig\_module instance}
00323 \textcolor{keyword}{---------------------------------------------------------------------------- }
00324 inst1\_pll\_areset\_in <= pll\_areset \textcolor{keywordflow}{OR} inst2\_pll\_reset\_req;
00325 
00326 pll\_reconfig\_module\_inst1 : \textcolor{keywordflow}{ENTITY} work.pll_reconfig_module
00327    \textcolor{keywordflow}{PORT} \textcolor{keywordflow}{MAP}
00328 (
00329       clock                => rcnfg_clk,
00330       counter_param        => \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}=>'0'\textcolor{vhdlchar}{)},
00331       counter_type         => \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}=>'0'\textcolor{vhdlchar}{)},
00332       data_in              => \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}=>'0'\textcolor{vhdlchar}{)},
00333       pll_areset_in        => inst1_pll_areset_in,
00334       pll_scandataout      => inst3_scandataout,
00335       pll_scandone         => inst3_scandone,
00336       read_param           => '0',
00337       reconfig             => inst0_reconfig,
00338       reset                => rcnfig_areset_sync,
00339       reset_rom_address    => '0',
00340       rom_data_in          => inst0_config_data,
00341       write_from_rom       => inst0_wr_rom,
00342       write_param          => '0',
00343       busy                 => inst1_busy,
00344       data_out             => \textcolor{keywordflow}{open},
00345       pll_areset           => inst1_pll_areset,
00346       pll_configupdate     => inst1_pll_configupdate,
00347       pll_scanclk          => inst1_pll_scanclk,
00348       pll_scanclkena       => inst1_pll_scanclkena,
00349       pll_scandata         => inst1_pll_scandata,
00350       rom_address_out      => inst1_rom_address_out,
00351       write_rom_ena        => inst1_write_rom_ena
00352 \textcolor{vhdlchar}{)};
00353  
00354 
00355 pll\_ps\_top\_inst2 : \textcolor{keywordflow}{entity} work.pll_ps_top
00356    \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00357 
00358       clk                     => inst1_pll_scanclk,
00359       reset_n                 => dynps_areset_n_sync,
00360 \textcolor{keyword}{      --module control ports}
00361       ps_en                   => dynps_en_sync,
00362       ps_mode                 => dynps_mode_sync,
00363       ps_tst                  => dynps_tst_sync, 
00364       ps_cnt                  => dynps_cnt_sel_sync,
00365       ps_updwn                => dynps_dir_sync,
00366       ps_phase                => dynps_phase_sync,
00367       ps_step_size            => dynps_step_size_sync,
00368       ps_busy                 => inst2_ps_busy,
00369       ps_done                 => inst2_ps_done,
00370       ps_status               => inst2_ps_status,
00371 \textcolor{keyword}{      --pll ports}
00372       pll_phasecounterselect  => inst2_pll_phasecounterselect,
00373       pll_phaseupdown         => inst2_pll_phaseupdown, 
00374       pll_phasestep           => inst2_pll_phasestep,        
00375       pll_phasedone           => inst3_phasedone,      
00376       pll_locked              => inst3_locked_scanclk,
00377       pll_reconfig            => rcnfig_en_sync_scanclk,
00378       pll_reset_req           => inst2_pll_reset_req,
00379 \textcolor{keyword}{      --sample compare module}
00380       smpl_cmp_en             => smpl_cmp_en,
00381       smpl_cmp_done           => smpl_cmp_done_sync,
00382       smpl_cmp_error          => smpl_cmp_error_sync
00383             
00384       \textcolor{vhdlchar}{)};  
00385 
00386        
00387    inst3\_inclk <= '0' & pll\_inclk;
00388 \textcolor{keyword}{----------------------------------------------------------------------------}
00389 \textcolor{keyword}{-- PLL instance}
00390 \textcolor{keyword}{----------------------------------------------------------------------------      }
00391 altpll_inst3 : altpll
00392 \textcolor{keywordflow}{GENERIC} \textcolor{keywordflow}{MAP} (
00393       bandwidth\_type             => bandwidth_type,
00394       clk0\_divide\_by             => clk0_divide_by,
00395       clk0\_duty\_cycle            => clk0_duty_cycle,
00396       clk0\_multiply\_by           => clk0_multiply_by,
00397       clk0\_phase\_shift           => clk0_phase_shift,   
00398       clk1\_divide\_by             => clk1_divide_by,
00399       clk1\_duty\_cycle            => clk1_duty_cycle,
00400       clk1\_multiply\_by           => clk1_multiply_by,
00401       clk1\_phase\_shift           => clk1_phase_shift,
00402       compensate\_clock           => compensate_clock,
00403       inclk0\_input\_frequency     => inclk0_input_frequency,
00404       intended\_device\_family     => intended_device_family,
00405       lpm\_hint                   => \textcolor{keyword}{"CBX\_MODULE\_PREFIX=pll"},
00406       lpm\_type                   => \textcolor{keyword}{"altpll"},
00407       operation\_mode             => operation_mode,
00408       pll\_type                   => \textcolor{keyword}{"AUTO"},
00409       port\_activeclock           => \textcolor{keyword}{"PORT\_UNUSED"},
00410       port\_areset                => \textcolor{keyword}{"PORT\_USED"},
00411       port\_clkbad0               => \textcolor{keyword}{"PORT\_UNUSED"},
00412       port\_clkbad1               => \textcolor{keyword}{"PORT\_UNUSED"},
00413       port\_clkloss               => \textcolor{keyword}{"PORT\_UNUSED"},
00414       port\_clkswitch             => \textcolor{keyword}{"PORT\_UNUSED"},
00415       port\_configupdate          => \textcolor{keyword}{"PORT\_USED"},
00416       port\_fbin                  => \textcolor{keyword}{"PORT\_UNUSED"},
00417       port\_inclk0                => \textcolor{keyword}{"PORT\_USED"},
00418       port\_inclk1                => \textcolor{keyword}{"PORT\_UNUSED"},
00419       port\_locked                => \textcolor{keyword}{"PORT\_USED"},
00420       port\_pfdena                => \textcolor{keyword}{"PORT\_USED"},
00421       port\_phasecounterselect    => \textcolor{keyword}{"PORT\_USED"},
00422       port\_phasedone             => \textcolor{keyword}{"PORT\_USED"},
00423       port\_phasestep             => \textcolor{keyword}{"PORT\_USED"},
00424       port\_phaseupdown           => \textcolor{keyword}{"PORT\_USED"},
00425       port\_pllena                => \textcolor{keyword}{"PORT\_UNUSED"},
00426       port\_scanaclr              => \textcolor{keyword}{"PORT\_UNUSED"},
00427       port\_scanclk               => \textcolor{keyword}{"PORT\_USED"},
00428       port\_scanclkena            => \textcolor{keyword}{"PORT\_USED"},
00429       port\_scandata              => \textcolor{keyword}{"PORT\_USED"},
00430       port\_scandataout           => \textcolor{keyword}{"PORT\_USED"},
00431       port\_scandone              => \textcolor{keyword}{"PORT\_USED"},
00432       port\_scanread              => \textcolor{keyword}{"PORT\_UNUSED"},
00433       port\_scanwrite             => \textcolor{keyword}{"PORT\_UNUSED"},
00434       port\_clk0                  => \textcolor{keyword}{"PORT\_USED"},
00435       port\_clk1                  => \textcolor{keyword}{"PORT\_USED"},
00436       port\_clk2                  => \textcolor{keyword}{"PORT\_UNUSED"},
00437       port\_clk3                  => \textcolor{keyword}{"PORT\_UNUSED"},
00438       port\_clk4                  => \textcolor{keyword}{"PORT\_UNUSED"},
00439       port\_clk5                  => \textcolor{keyword}{"PORT\_UNUSED"},
00440       port\_clkena0               => \textcolor{keyword}{"PORT\_UNUSED"},
00441       port\_clkena1               => \textcolor{keyword}{"PORT\_UNUSED"},
00442       port\_clkena2               => \textcolor{keyword}{"PORT\_UNUSED"},
00443       port\_clkena3               => \textcolor{keyword}{"PORT\_UNUSED"},
00444       port\_clkena4               => \textcolor{keyword}{"PORT\_UNUSED"},
00445       port\_clkena5               => \textcolor{keyword}{"PORT\_UNUSED"},
00446       port\_extclk0               => \textcolor{keyword}{"PORT\_UNUSED"},
00447       port\_extclk1               => \textcolor{keyword}{"PORT\_UNUSED"},
00448       port\_extclk2               => \textcolor{keyword}{"PORT\_UNUSED"},
00449       port\_extclk3               => \textcolor{keyword}{"PORT\_UNUSED"},
00450       self\_reset\_on\_loss\_lock    => \textcolor{keyword}{"OFF"},
00451       width\_clock                => \textcolor{vhdllogic}{5},
00452       width\_phasecounterselect   => \textcolor{vhdllogic}{3},
00453       scan\_chain\_mif\_file        => scan_chain_mif_file
00454 \textcolor{vhdlchar}{)}
00455 \textcolor{keywordflow}{PORT} \textcolor{keywordflow}{MAP} (
00456       areset               => inst1_pll_areset,
00457       configupdate         => inst1_pll_configupdate,
00458       inclk                => inst3_inclk,
00459       pfdena               => '1',
00460       phasecounterselect   => inst2_pll_phasecounterselect,
00461       phasestep            => inst2_pll_phasestep,
00462       phaseupdown          => inst2_pll_phaseupdown,
00463       scanclk              => inst1_pll_scanclk,
00464       scanclkena           => inst1_pll_scanclkena,
00465       scandata             => inst1_pll_scandata,
00466       clk                  => inst3_clk,
00467       locked               => inst3_locked,
00468       phasedone            => inst3_phasedone,
00469       scandataout          => inst3_scandataout,
00470       scandone             => inst3_scandone
00471 \textcolor{vhdlchar}{)};
00472    
00473    
00474 pll\_reconfig\_status\_inst4 : \textcolor{keywordflow}{entity} work.pll_reconfig_status
00475    \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00476       clk               => inst1_pll_scanclk,
00477       reset_n           => pll_areset_n,
00478       reconfig_en       => rcnfig_en_sync_scanclk,
00479       scandone          => inst3_scandone,
00480       exclude_ps_status => '0',
00481       ps_en             => dynps_en_sync,
00482       ps_status         => inst2_ps_status,
00483       rcfig_complete    => inst4_rcfig_complete
00484       
00485       \textcolor{vhdlchar}{)};   
00486 
00487 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00488 \textcolor{keyword}{-- c0 direct output lcell delay chain }
00489 \textcolor{keyword}{-- ----------------------------------------------------------------------------   }
00490 \textcolor{vhdlchar}{c0\_dly\_instx\_gen} \textcolor{vhdlchar}{:} 
00491 \textcolor{keywordflow}{for} \textcolor{vhdlchar}{i} \textcolor{keywordflow}{in} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{to} \textcolor{vhdlchar}{drct_c0_ndly}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{generate}
00492 \textcolor{keyword}{   --first lcell instance}
00493    \textcolor{vhdlchar}{first} \textcolor{vhdlchar}{:} \textcolor{keywordflow}{if} \textcolor{vhdlchar}{i} \textcolor{vhdlchar}{=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{generate} 
00494    lcell0 : lcell 
00495       \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00496          a\_in  => pll_inclk_global,
00497          a\_out => drct_c0_dly_chain\textcolor{vhdlchar}{(}i\textcolor{vhdlchar}{)}
00498          \textcolor{vhdlchar}{)};
00499    \textcolor{keywordflow}{end} \textcolor{keywordflow}{generate} \textcolor{vhdlchar}{first};
00500 \textcolor{keyword}{   --rest of the lcell instance}
00501    \textcolor{vhdlchar}{rest} \textcolor{vhdlchar}{:} \textcolor{keywordflow}{if} \textcolor{vhdlchar}{i} \textcolor{vhdlchar}{>} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{generate}
00502    lcellx : lcell 
00503       \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00504          a\_in  => drct_c0_dly_chain\textcolor{vhdlchar}{(}i-\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)},
00505          a\_out => drct_c0_dly_chain\textcolor{vhdlchar}{(}i\textcolor{vhdlchar}{)}
00506          \textcolor{vhdlchar}{)};
00507    \textcolor{keywordflow}{end} \textcolor{keywordflow}{generate} \textcolor{vhdlchar}{rest};
00508 \textcolor{keywordflow}{end} \textcolor{keywordflow}{generate} \textcolor{vhdlchar}{c0\_dly\_instx\_gen};
00509 
00510 
00511 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00512 \textcolor{keyword}{-- c1 direct output lcell delay chain }
00513 \textcolor{keyword}{-- ----------------------------------------------------------------------------   }
00514 \textcolor{vhdlchar}{c1\_dly\_instx\_gen} \textcolor{vhdlchar}{:} 
00515 \textcolor{keywordflow}{for} \textcolor{vhdlchar}{i} \textcolor{keywordflow}{in} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{to} \textcolor{vhdlchar}{drct_c1_ndly}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{generate}
00516 \textcolor{keyword}{   --first lcell instance}
00517    \textcolor{vhdlchar}{first} \textcolor{vhdlchar}{:} \textcolor{keywordflow}{if} \textcolor{vhdlchar}{i} \textcolor{vhdlchar}{=} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{generate} 
00518    lcell0 : lcell 
00519       \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00520          a\_in  => pll_inclk_global,
00521          a\_out => drct_c1_dly_chain\textcolor{vhdlchar}{(}i\textcolor{vhdlchar}{)}
00522          \textcolor{vhdlchar}{)};
00523    \textcolor{keywordflow}{end} \textcolor{keywordflow}{generate} \textcolor{vhdlchar}{first};
00524 \textcolor{keyword}{   --rest of the lcell instance}
00525    \textcolor{vhdlchar}{rest} \textcolor{vhdlchar}{:} \textcolor{keywordflow}{if} \textcolor{vhdlchar}{i} \textcolor{vhdlchar}{>} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0} \textcolor{keywordflow}{generate}
00526    lcellx : lcell 
00527       \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00528          a\_in  => drct_c1_dly_chain\textcolor{vhdlchar}{(}i-\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)},
00529          a\_out => drct_c1_dly_chain\textcolor{vhdlchar}{(}i\textcolor{vhdlchar}{)}
00530          \textcolor{vhdlchar}{)};
00531    \textcolor{keywordflow}{end} \textcolor{keywordflow}{generate} \textcolor{vhdlchar}{rest};
00532 \textcolor{keywordflow}{end} \textcolor{keywordflow}{generate} \textcolor{vhdlchar}{c1\_dly\_instx\_gen};
00533 
00534 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00535 \textcolor{keyword}{-- c0 clk MUX}
00536 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00537 \textcolor{vhdlchar}{c0_mux} \textcolor{vhdlchar}{<=}   \textcolor{vhdlchar}{inst3_clk}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{drct_clk_en}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} 
00538             \textcolor{vhdlchar}{drct_c0_dly_chain}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{drct_c0_ndly}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)};
00539 
00540 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00541 \textcolor{keyword}{-- c1 clk MUX}
00542 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00543 \textcolor{vhdlchar}{c1_mux} \textcolor{vhdlchar}{<=}   \textcolor{vhdlchar}{inst3_clk}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{drct_clk_en}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} 
00544             \textcolor{vhdlchar}{drct_c1_dly_chain}\textcolor{vhdlchar}{(}\textcolor{vhdlchar}{drct_c1_ndly}\textcolor{vhdlchar}{-}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)};
00545 
00546 
00547 locked\_mux <=  pll\_areset\_n \textcolor{keywordflow}{when} (drct\_clk\_en(\textcolor{vhdllogic}{0})='1' \textcolor{keywordflow}{OR} drct\_clk\_en(\textcolor{vhdllogic}{1})='1') \textcolor{keywordflow}{else}
00548                inst3\_locked;
00549 
00550 
00551 
00552 
00553 inst5\_c0\_pol\_h(\textcolor{vhdllogic}{0}) <= \textcolor{keywordflow}{not} inv\_c0;
00554 inst5\_c0\_pol\_l(\textcolor{vhdllogic}{0}) <= inv\_c0;
00555 
00556 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00557 \textcolor{keyword}{-- DDR output buffer }
00558 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00559 ALTDDIO\_OUT\_component\_int5 : ALTDDIO\_OUT
00560 \textcolor{keywordflow}{GENERIC} \textcolor{keywordflow}{MAP} (
00561    extend\_oe\_disable       => \textcolor{keyword}{"OFF"},
00562    intended\_device\_family  => intended_device_family,
00563    invert\_output           => \textcolor{keyword}{"OFF"},
00564    lpm\_hint                => \textcolor{keyword}{"UNUSED"},
00565    lpm\_type                => \textcolor{keyword}{"altddio\_out"},
00566    oe\_reg                  => \textcolor{keyword}{"UNREGISTERED"},
00567    power\_up\_high           => \textcolor{keyword}{"OFF"},
00568    width                   => \textcolor{vhdllogic}{1}
00569 \textcolor{vhdlchar}{)}
00570 \textcolor{keywordflow}{PORT} \textcolor{keywordflow}{MAP} (
00571    aclr           => '0',
00572    datain\_h       => inst5_c0_pol_h,
00573    datain\_l       => inst5_c0_pol_l,
00574    outclock       => c0_global,
00575    dataout        => inst5_dataout
00576 \textcolor{vhdlchar}{)};
00577 
00578 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00579 \textcolor{keyword}{-- Clock control buffers }
00580 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00581 clkctrl_inst6 : clkctrl 
00582 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00583    inclk    => pll_inclk,
00584    ena      => '1',
00585    outclk   => pll_inclk_global
00586 \textcolor{vhdlchar}{)};
00587 
00588 clkctrl_inst7 : clkctrl 
00589 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00590    inclk    => c0_mux,
00591    ena      => clk_ena\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)},
00592    outclk   => c0_global
00593 \textcolor{vhdlchar}{)};
00594 
00595 clkctrl_inst8 : clkctrl 
00596 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map}(
00597    inclk    => c1_mux,
00598    ena      => clk_ena\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)},
00599    outclk   => c1_global
00600 \textcolor{vhdlchar}{)};
00601 
00602 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00603 \textcolor{keyword}{-- To output ports}
00604 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00605 \textcolor{vhdlchar}{c0}             \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{inst5_dataout}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00606 \textcolor{vhdlchar}{c1}             \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{c1_global};
00607 \textcolor{vhdlchar}{pll_locked}     \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{locked_mux};
00608 \textcolor{vhdlchar}{rcnfig_status}  \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{inst4_rcfig_complete};
00609 \textcolor{vhdlchar}{dynps_done}     \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{inst2_ps_done};
00610 \textcolor{vhdlchar}{dynps_status}   \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{inst2_ps_status};
00611 \textcolor{vhdlchar}{busy}           \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{inst1_busy} \textcolor{keywordflow}{OR} \textcolor{vhdlchar}{inst2_ps_status};
00612   
00613 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};   
00614 
00615 
00616 
00617 
00618 
\end{DoxyCode}
