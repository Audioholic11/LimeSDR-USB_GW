\subsection{unpack\+\_\+64\+\_\+to\+\_\+48.\+vhd}
\label{unpack__64__to__48_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/bit\+\_\+unpack/synth/unpack\+\_\+64\+\_\+to\+\_\+48.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/bit\+\_\+unpack/synth/unpack\+\_\+64\+\_\+to\+\_\+48.\+vhd}}

\begin{DoxyCode}
00001 
00002 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00003 \textcolor{keyword}{-- FILE:    unpack\_64\_to\_48.vhd}
00004 \textcolor{keyword}{-- DESCRIPTION: unpacks bits from 64b words to 12 bit samples}
00005 \textcolor{keyword}{-- DATE:    March 30, 2017}
00006 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00007 \textcolor{keyword}{-- REVISIONS:}
00008 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00009 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00010 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00011 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00012 
00013 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00014 \textcolor{keyword}{-- Entity declaration}
00015 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00016 \textcolor{keywordflow}{entity }unpack_64_to_48 \textcolor{keywordflow}{is}
00017   \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00018 \textcolor{keyword}{      --input ports }
00019       \textcolor{vhdlchar}{clk}               \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00020       \textcolor{vhdlchar}{reset_n}           \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00021         \textcolor{vhdlchar}{data_in_wrreq}   \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00022         \textcolor{vhdlchar}{data64_in}       \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00023         \textcolor{vhdlchar}{data48_out}      \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00024         \textcolor{vhdlchar}{data_out_valid}  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}
00025        
00026         \textcolor{vhdlchar}{)};
00027 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{unpack\_64\_to\_48};
00028 
00029 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00030 \textcolor{keyword}{-- Architecture}
00031 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00032 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} unpack_64_to_48 is
00033 \textcolor{keyword}{--declare signals,  components here}
00034 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{word128_0}              \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00035 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{word128_1}              \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00036 
00037 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{word128_0_valid}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00038 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{word128_1_valid}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00039 
00040 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data128_out_mux}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00041 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data128_out_reg}     \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00042 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data_out_valid_reg}  \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00043 
00044 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{wr_cnt}                 \textcolor{vhdlchar}{:} \textcolor{comment}{unsigned}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00045 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{data64_in_reg}            \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00046   
00047 \textcolor{vhdlkeyword}{begin}
00048 
00049 
00050 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00051 \textcolor{keyword}{-- Input data register}
00052 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00053   \textcolor{keywordflow}{process}(reset_n, clk)
00054 \textcolor{vhdlkeyword}{    begin}
00055       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00056             \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00057       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00058          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{data_in_wrreq} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00059                 \textcolor{vhdlchar}{data64_in_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data64_in};
00060          \textcolor{keywordflow}{else} 
00061             \textcolor{vhdlchar}{data64_in_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data64_in_reg};
00062          \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00063         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00064     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00065     
00066 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00067 \textcolor{keyword}{-- Write counter}
00068 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00069 \textcolor{keywordflow}{process}(clk, reset_n) \textcolor{keywordflow}{is} 
00070 \textcolor{vhdlkeyword}{    begin }
00071         \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00072             \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00073         \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00074             \textcolor{keywordflow}{if}  \textcolor{vhdlchar}{data_in_wrreq}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00075                 \textcolor{keywordflow}{if} \textcolor{vhdlchar}{wr_cnt} \textcolor{vhdlchar}{<} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{2} \textcolor{keywordflow}{then} 
00076                     \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{+}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1};
00077                 \textcolor{keywordflow}{else} 
00078                     \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00079                 \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00080             \textcolor{keywordflow}{else}
00081                 \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{wr_cnt};
00082             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00083         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00084 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00085 
00086 
00087 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00088 \textcolor{keyword}{-- 128b word formation}
00089 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00090   \textcolor{keywordflow}{process}(reset_n, clk)
00091 \textcolor{vhdlkeyword}{    begin}
00092       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00093             \textcolor{vhdlchar}{word128_0}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00094          \textcolor{vhdlchar}{word128_0_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00095       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00096          \textcolor{keywordflow}{if} \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{=}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{data_in_wrreq}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00097                 \textcolor{vhdlchar}{word128_0}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data64_in}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{31} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{20}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00098                         \textcolor{vhdlchar}{data64_in}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{19} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{8}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&} 
00099                         \textcolor{vhdlchar}{data64_in}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{7} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{60}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00100                         \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{59} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{48}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00101                         \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{47} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{36}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00102                         \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{35} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{24}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00103                         \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{23} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{12}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00104                         \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{11} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"};
00105             \textcolor{vhdlchar}{word128_0_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'};
00106             \textcolor{keywordflow}{else} 
00107                 \textcolor{vhdlchar}{word128_0}      \textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{word128_0};
00108             \textcolor{vhdlchar}{word128_0_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00109             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00110         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00111     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00112 
00113   \textcolor{keywordflow}{process}(reset_n, clk)
00114 \textcolor{vhdlkeyword}{    begin}
00115       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00116             \textcolor{vhdlchar}{word128_1}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00117          \textcolor{vhdlchar}{word128_1_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00118       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00119             \textcolor{keywordflow}{if} \textcolor{vhdlchar}{wr_cnt}\textcolor{vhdlchar}{=}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{data_in_wrreq}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00120                \textcolor{vhdlchar}{word128_1}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data64_in}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{52}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00121                            \textcolor{vhdlchar}{data64_in}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{51} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{40}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00122                            \textcolor{vhdlchar}{data64_in}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{39} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{28}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&} 
00123                            \textcolor{vhdlchar}{data64_in}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{27} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{16}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00124                            \textcolor{vhdlchar}{data64_in}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{15} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{4}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&} 
00125                            \textcolor{vhdlchar}{data64_in}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{3} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{56}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&}
00126                            \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{55} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{44}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"} \textcolor{vhdlchar}{&} 
00127                            \textcolor{vhdlchar}{data64_in_reg}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{43} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{32}\textcolor{vhdlchar}{)} \textcolor{vhdlchar}{&} \textcolor{vhdllogic}{"0000"};                   
00128             \textcolor{vhdlchar}{word128_1_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'};
00129             \textcolor{keywordflow}{else} 
00130                 \textcolor{vhdlchar}{word128_1}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{word128_1};
00131             \textcolor{vhdlchar}{word128_1_valid}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00132             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00133         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00134     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00135     
00136 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00137 \textcolor{keyword}{-- 128b word output mux}
00138 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00139 \textcolor{vhdlchar}{data128_out_mux}\textcolor{vhdlchar}{<=}   \textcolor{vhdlchar}{word128_0} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{word128_0_valid}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} 
00140                   \textcolor{vhdlchar}{word128_1};
00141 
00142 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00143 \textcolor{keyword}{-- Output register stage}
00144 \textcolor{keyword}{-- ----------------------------------------------------------------------------                  }
00145   \textcolor{keywordflow}{process}(reset_n, clk)
00146 \textcolor{vhdlkeyword}{    begin}
00147       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00148          \textcolor{vhdlchar}{data128_out_reg}      \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others} \textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00149             \textcolor{vhdlchar}{data_out_valid_reg}   \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};        
00150       \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00151          \textcolor{vhdlchar}{data128_out_reg}      \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data128_out_mux}; 
00152             \textcolor{vhdlchar}{data_out_valid_reg}   \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{word128_0_valid} \textcolor{keywordflow}{OR} \textcolor{vhdlchar}{word128_1_valid};
00153         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00154     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00155     
00156 \textcolor{vhdlchar}{data48_out}     \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data128_out_reg};
00157 \textcolor{vhdlchar}{data_out_valid} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{data_out_valid_reg};
00158 
00159 
00160  
00161 
00162 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};   
00163 
00164 
00165 
\end{DoxyCode}
