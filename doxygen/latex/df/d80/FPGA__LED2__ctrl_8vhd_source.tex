\subsection{F\+P\+G\+A\+\_\+\+L\+E\+D2\+\_\+ctrl.\+vhd}
\label{FPGA__LED2__ctrl_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/general/\+F\+P\+G\+A\+\_\+\+L\+E\+D2\+\_\+ctrl.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/general/\+F\+P\+G\+A\+\_\+\+L\+E\+D2\+\_\+ctrl.\+vhd}}

\begin{DoxyCode}
00001 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00002 \textcolor{keyword}{-- FILE:    FPGA\_LED2\_ctrl.vhd}
00003 \textcolor{keyword}{-- DESCRIPTION: displays adf and dac status. If dac is used no led, if }
00004 \textcolor{keyword}{-- adf - adf locked green not locked red}
00005 \textcolor{keyword}{-- DATE:    Sep 5, 2016}
00006 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00007 \textcolor{keyword}{-- REVISIONS:}
00008 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00009 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00010 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00011 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00012 
00013 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00014 \textcolor{keyword}{-- Entity declaration}
00015 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00016 \textcolor{keywordflow}{entity }FPGA_LED2_ctrl \textcolor{keywordflow}{is}
00017   \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00018 \textcolor{keyword}{        --input ports }
00019         \textcolor{vhdlchar}{clk}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00020         \textcolor{vhdlchar}{reset_n}     \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00021           \textcolor{vhdlchar}{adf_muxout}    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00022           \textcolor{vhdlchar}{dac_ss}            \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00023           \textcolor{vhdlchar}{adf_ss}            \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00024           \textcolor{vhdlchar}{led_ctrl}      \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00025           \textcolor{vhdlchar}{led_g}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic};
00026           \textcolor{vhdlchar}{led_r}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}
00027 
00028 \textcolor{keyword}{        --output ports }
00029         
00030         \textcolor{vhdlchar}{)};
00031 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{FPGA\_LED2\_ctrl};
00032 
00033 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00034 \textcolor{keyword}{-- Architecture}
00035 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00036 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} FPGA_LED2_ctrl is
00037 \textcolor{keyword}{--declare signals,  components here}
00038 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{last_val} \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector} \textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00039 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{led_g_def}    \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00040 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{led_r_def}    \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00041 
00042 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{led_g_ovr}    \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00043 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{led_r_ovr}    \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00044 
00045 \textcolor{vhdlkeyword}{begin}
00046 
00047   \textcolor{keywordflow}{process}(reset_n, clk)
00048 \textcolor{vhdlkeyword}{    begin}
00049       \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then}
00050         \textcolor{vhdlchar}{last_val}\textcolor{vhdlchar}{<=}\textcolor{vhdllogic}{"10"}; 
00051         \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{clk} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then}
00052           \textcolor{keywordflow}{if} \textcolor{vhdlchar}{dac_ss}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00053                 \textcolor{vhdlchar}{last_val}\textcolor{vhdlchar}{<=}\textcolor{vhdllogic}{"00"};
00054             \textcolor{keywordflow}{elsif}   \textcolor{vhdlchar}{adf_ss}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00055                 \textcolor{vhdlchar}{last_val}\textcolor{vhdlchar}{<=}\textcolor{vhdllogic}{"10"};
00056             \textcolor{keywordflow}{else} 
00057                 \textcolor{vhdlchar}{last_val}\textcolor{vhdlchar}{<=}\textcolor{vhdlchar}{last_val};
00058             \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};         
00059         \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00060     \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00061      
00062 \textcolor{vhdlchar}{led_g_ovr}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{led_ctrl}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{led_ctrl}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00063 \textcolor{vhdlchar}{led_r_ovr}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{led_ctrl}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{led_ctrl}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{2}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};   
00064      
00065      
00066 \textcolor{vhdlchar}{led_g_def}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{last_val}\textcolor{vhdlchar}{=}\textcolor{vhdllogic}{"00"} \textcolor{keywordflow}{else} 
00067           \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{last_val}\textcolor{vhdlchar}{=}\textcolor{vhdllogic}{"10"} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{adf_muxout}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} 
00068           \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00069           
00070 \textcolor{vhdlchar}{led_r_def}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{last_val}\textcolor{vhdlchar}{=}\textcolor{vhdllogic}{"00"} \textcolor{keywordflow}{else} 
00071           \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{last_val}\textcolor{vhdlchar}{=}\textcolor{vhdllogic}{"10"} \textcolor{keywordflow}{and} \textcolor{vhdlchar}{adf_muxout}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} 
00072           \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};   
00073   
00074 \textcolor{vhdlchar}{led_g}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{led_g_def} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{led_ctrl}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} \textcolor{vhdlchar}{led_g_ovr};
00075 \textcolor{vhdlchar}{led_r}\textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{led_r_def} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{led_ctrl}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} \textcolor{vhdlchar}{led_r_ovr};        
00076   
00077   
00078 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};
00079 
00080 
00081 
00082 
00083 
\end{DoxyCode}
