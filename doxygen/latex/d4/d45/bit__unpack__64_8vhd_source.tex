\subsection{bit\+\_\+unpack\+\_\+64.\+vhd}
\label{bit__unpack__64_8vhd_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/bit\+\_\+unpack/synth/bit\+\_\+unpack\+\_\+64.\+vhd@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/src/tx\+\_\+path\+\_\+top/bit\+\_\+unpack/synth/bit\+\_\+unpack\+\_\+64.\+vhd}}

\begin{DoxyCode}
00001 
00002 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00003 \textcolor{keyword}{-- FILE:    bit\_unpack\_64.vhd}
00004 \textcolor{keyword}{-- DESCRIPTION: unpacks data from 64bit words to samples}
00005 \textcolor{keyword}{-- DATE:    March 30, 2017}
00006 \textcolor{keyword}{-- AUTHOR(s):   Lime Microsystems}
00007 \textcolor{keyword}{-- REVISIONS:}
00008 \textcolor{keyword}{-- ---------------------------------------------------------------------------- }
00009 \textcolor{vhdlkeyword}{library }\textcolor{keywordflow}{ieee};
00010 \textcolor{vhdlkeyword}{use }ieee.std\_logic\_1164.\textcolor{keywordflow}{all};
00011 \textcolor{vhdlkeyword}{use }ieee.numeric\_std.\textcolor{keywordflow}{all};
00012 
00013 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00014 \textcolor{keyword}{-- Entity declaration}
00015 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00016 \textcolor{keywordflow}{entity }bit_unpack_64 \textcolor{keywordflow}{is}
00017 
00018   \textcolor{keywordflow}{port} \textcolor{vhdlchar}{(}
00019 \textcolor{keyword}{        --input ports }
00020         \textcolor{vhdlchar}{clk}             \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00021         \textcolor{vhdlchar}{reset_n}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00022         \textcolor{vhdlchar}{data_in}         \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{63} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00023         \textcolor{vhdlchar}{data_in_valid}   \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic};
00024         \textcolor{vhdlchar}{sample_width}    \textcolor{vhdlchar}{:} \textcolor{keywordflow}{in} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};\textcolor{keyword}{ --"10"-12bit, "01"-14bit, "00"-16bit;}
00025 \textcolor{keyword}{        --output ports }
00026         \textcolor{vhdlchar}{data_out}        \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00027         \textcolor{vhdlchar}{data_out_valid}  \textcolor{vhdlchar}{:} \textcolor{keywordflow}{out} \textcolor{comment}{std\_logic}       
00028         \textcolor{vhdlchar}{)};
00029 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{bit\_unpack\_64};
00030 
00031 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00032 \textcolor{keyword}{-- Architecture}
00033 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00034 \textcolor{keywordflow}{architecture} arch \textcolor{keywordflow}{of} bit_unpack_64 is
00035 \textcolor{keyword}{--Declare signals,  components here}
00036 
00037 \textcolor{keyword}{--inst0 signals}
00038 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst0_data48_out}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00039 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst0_data_out_valid} \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00040 
00041 \textcolor{keyword}{--inst1 signals}
00042 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_data56_out}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00043 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst1_data_out_valid} \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00044 
00045 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst2_data64_out}       \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00046 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{inst2_data_out_valid}   \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00047 
00048 
00049 \textcolor{keyword}{--mux0 signals}
00050 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux0_data128}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00051 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux0_data_out_valid}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00052 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux0_sel}                 \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00053 
00054 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux0_data128_reg}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00055 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux0_data_out_valid_reg}\textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00056 
00057 
00058 \textcolor{keyword}{--mux1 signals}
00059 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux1_data128}             \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00060 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux1_data_out_valid}      \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00061 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux1_sel}                 \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00062 
00063 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux1_data128_reg}         \textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic\_vector}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{127} \textcolor{keywordflow}{downto} \textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00064 \textcolor{keywordflow}{signal} \textcolor{vhdlchar}{mux1_data_out_valid_reg}\textcolor{vhdlchar}{:} \textcolor{comment}{std\_logic};
00065 
00066 
00067   
00068 \textcolor{vhdlkeyword}{begin}
00069 
00070 
00071 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00072 \textcolor{keyword}{-- Component instances}
00073 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00074 unpack\_64\_to\_48\_inst0 : \textcolor{keywordflow}{entity} work.unpack_64_to_48 
00075 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00076        clk              => clk,
00077       reset_n           => reset_n,
00078         data_in_wrreq   => data_in_valid,
00079         data64_in       => data_in,
00080         data48_out      => inst0_data48_out,
00081         data_out_valid  => inst0_data_out_valid
00082 \textcolor{vhdlchar}{)};
00083 
00084 unpack\_64\_to\_56\_inst1 : \textcolor{keywordflow}{entity} work.unpack_64_to_56 
00085 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00086        clk              => clk,
00087       reset_n           => reset_n,
00088         data_in_wrreq   => data_in_valid,
00089         data64_in       => data_in,
00090         data56_out      => inst1_data56_out,
00091         data_out_valid  => inst1_data_out_valid
00092 \textcolor{vhdlchar}{)};
00093 
00094 unpack\_64\_to\_64\_inst2 : \textcolor{keywordflow}{entity} work.unpack_64_to_64 
00095 \textcolor{keywordflow}{port} \textcolor{keywordflow}{map} (
00096        clk              => clk,
00097       reset_n           => reset_n,
00098         data_in_wrreq   => data_in_valid,
00099         data64_in       => data_in,
00100         data64_out      => inst2_data64_out,
00101         data_out_valid  => inst2_data_out_valid
00102 \textcolor{vhdlchar}{)};
00103 
00104 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00105 \textcolor{keyword}{-- MUX 0 }
00106 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00107 
00108 \textcolor{vhdlchar}{mux0_sel}                \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{sample_width}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)};
00109 
00110 \textcolor{vhdlchar}{mux0_data128}            \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{inst0_data48_out} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{mux0_sel}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} 
00111                                 inst1\_data56\_out;
00112                     
00113 \textcolor{vhdlchar}{mux0_data_out_valid}     \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{inst0_data_out_valid} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{mux0_sel}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} 
00114                                 inst1\_data\_out\_valid;
00115             
00116 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00117 \textcolor{keyword}{-- MUX 0 registers}
00118 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00119 \textcolor{keywordflow}{process}(clk, reset_n)
00120 \textcolor{vhdlkeyword}{begin }
00121     \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00122         \textcolor{vhdlchar}{mux0_data128_reg}            \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00123         \textcolor{vhdlchar}{mux0_data_out_valid_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00124     \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then} 
00125         \textcolor{vhdlchar}{mux0_data128_reg}            \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{mux0_data128};
00126         \textcolor{vhdlchar}{mux0_data_out_valid_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{mux0_data_out_valid};
00127     \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00128 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00129 
00130 
00131 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00132 \textcolor{keyword}{-- MUX 1 }
00133 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00134 \textcolor{vhdlchar}{mux1_sel}                    \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{sample_width}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{OR} \textcolor{vhdlchar}{sample_width}\textcolor{vhdlchar}{(}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{)};
00135 
00136 \textcolor{vhdlchar}{mux1_data128}                \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{mux0_data128_reg}             \textcolor{keywordflow}{when} \textcolor{vhdlchar}{mux1_sel}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} 
00137                                     inst2\_data64\_out;
00138                     
00139 \textcolor{vhdlchar}{mux1_data_out_valid}         \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{mux0_data_out_valid_reg} \textcolor{keywordflow}{when} \textcolor{vhdlchar}{mux1_sel}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{else} 
00140                                     inst2\_data\_out\_valid;
00141                                     
00142 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00143 \textcolor{keyword}{-- MUX 1 registers}
00144 \textcolor{keyword}{-- ----------------------------------------------------------------------------                                 }
00145 \textcolor{keywordflow}{process}(clk, reset_n)
00146 \textcolor{vhdlkeyword}{begin }
00147     \textcolor{keywordflow}{if} \textcolor{vhdlchar}{reset_n} \textcolor{vhdlchar}{=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'} \textcolor{keywordflow}{then} 
00148         \textcolor{vhdlchar}{mux1_data128_reg}            \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{(}\textcolor{keywordflow}{others}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{>} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)};
00149         \textcolor{vhdlchar}{mux1_data_out_valid_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{0}\textcolor{vhdlchar}{'};
00150     \textcolor{keywordflow}{elsif} \textcolor{vhdlchar}{(}\textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{'}\textcolor{vhdlkeyword}{event} \textcolor{keywordflow}{AND} \textcolor{vhdlchar}{clk}\textcolor{vhdlchar}{=}\textcolor{vhdlchar}{'}\textcolor{vhdllogic}{}\textcolor{vhdllogic}{1}\textcolor{vhdlchar}{'}\textcolor{vhdlchar}{)} \textcolor{keywordflow}{then} 
00151         \textcolor{vhdlchar}{mux1_data128_reg}            \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{mux1_data128};
00152         \textcolor{vhdlchar}{mux1_data_out_valid_reg} \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{mux1_data_out_valid};
00153     \textcolor{keywordflow}{end} \textcolor{keywordflow}{if};
00154 \textcolor{keywordflow}{end} \textcolor{keywordflow}{process};
00155 
00156 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00157 \textcolor{keyword}{-- Registers to output ports}
00158 \textcolor{keyword}{-- ----------------------------------------------------------------------------}
00159 
00160 \textcolor{vhdlchar}{data_out}        \textcolor{vhdlchar}{<=} \textcolor{vhdlchar}{mux1_data128_reg};
00161 \textcolor{vhdlchar}{data_out_valid} \textcolor{vhdlchar}{<=}   \textcolor{vhdlchar}{mux1_data_out_valid_reg};
00162 
00163 
00164 
00165 \textcolor{keywordflow}{end} \textcolor{vhdlchar}{arch};   
00166 
00167 
00168 
\end{DoxyCode}
