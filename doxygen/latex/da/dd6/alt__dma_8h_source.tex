\subsection{alt\+\_\+dma.\+h}
\label{alt__dma_8h_source}\index{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/software/lms\+\_\+ctr\+\_\+bsp/\+H\+A\+L/inc/sys/alt\+\_\+dma.\+h@{/home/erik/git/dev/\+Lime\+S\+D\+R-\/\+U\+S\+B\+\_\+\+G\+W/software/lms\+\_\+ctr\+\_\+bsp/\+H\+A\+L/inc/sys/alt\+\_\+dma.\+h}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#ifndef \_\_ALT\_DMA\_H\_\_}
00002 \textcolor{preprocessor}{#define \_\_ALT\_DMA\_H\_\_}
00003 
00004 \textcolor{comment}{/******************************************************************************}
00005 \textcolor{comment}{*                                                                             *}
00006 \textcolor{comment}{* License Agreement                                                           *}
00007 \textcolor{comment}{*                                                                             *}
00008 \textcolor{comment}{* Copyright (c) 2004-2005 Altera Corporation, San Jose, California, USA.      *}
00009 \textcolor{comment}{* All rights reserved.                                                        *}
00010 \textcolor{comment}{*                                                                             *}
00011 \textcolor{comment}{* Permission is hereby granted, free of charge, to any person obtaining a     *}
00012 \textcolor{comment}{* copy of this software and associated documentation files (the "Software"),  *}
00013 \textcolor{comment}{* to deal in the Software without restriction, including without limitation   *}
00014 \textcolor{comment}{* the rights to use, copy, modify, merge, publish, distribute, sublicense,    *}
00015 \textcolor{comment}{* and/or sell copies of the Software, and to permit persons to whom the       *}
00016 \textcolor{comment}{* Software is furnished to do so, subject to the following conditions:        *}
00017 \textcolor{comment}{*                                                                             *}
00018 \textcolor{comment}{* The above copyright notice and this permission notice shall be included in  *}
00019 \textcolor{comment}{* all copies or substantial portions of the Software.                         *}
00020 \textcolor{comment}{*                                                                             *}
00021 \textcolor{comment}{* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR  *}
00022 \textcolor{comment}{* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,    *}
00023 \textcolor{comment}{* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE *}
00024 \textcolor{comment}{* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER      *}
00025 \textcolor{comment}{* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING     *}
00026 \textcolor{comment}{* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER         *}
00027 \textcolor{comment}{* DEALINGS IN THE SOFTWARE.                                                   *}
00028 \textcolor{comment}{*                                                                             *}
00029 \textcolor{comment}{* This agreement shall be governed in all respects by the laws of the State   *}
00030 \textcolor{comment}{* of California and by the laws of the United States of America.              *}
00031 \textcolor{comment}{*                                                                             *}
00032 \textcolor{comment}{* Altera does not recommend, suggest or require that this reference design    *}
00033 \textcolor{comment}{* file be used in conjunction or combination with any other product.          *}
00034 \textcolor{comment}{******************************************************************************/}
00035 
00036 \textcolor{comment}{/******************************************************************************}
00037 \textcolor{comment}{*                                                                             *}
00038 \textcolor{comment}{* THIS IS A LIBRARY READ-ONLY SOURCE FILE. DO NOT EDIT.                       *}
00039 \textcolor{comment}{*                                                                             *}
00040 \textcolor{comment}{******************************************************************************/}
00041 
00042 \textcolor{preprocessor}{#include "sys/alt_dma_dev.h"}
00043 \textcolor{preprocessor}{#include "alt_types.h"}
00044 
00045 \textcolor{preprocessor}{#include <errno.h>}
00046 
00047 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00048 \textcolor{keyword}{extern} \textcolor{stringliteral}{"C"}
00049 \{
00050 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* \_\_cplusplus */}\textcolor{preprocessor}{}
00051 
00052 \textcolor{comment}{/*}
00053 \textcolor{comment}{ * This header contains the application side interface for accessing DMA }
00054 \textcolor{comment}{ * resources. See alt\_dma\_dev.h for the dma device driver interface.}
00055 \textcolor{comment}{ *}
00056 \textcolor{comment}{ * The interface model treats a DMA transaction as being composed of two }
00057 \textcolor{comment}{ * halves (read and write). }
00058 \textcolor{comment}{ *}
00059 \textcolor{comment}{ * The application can supply data for transmit using an "alt\_dma\_txchan"}
00060 \textcolor{comment}{ * descriptor. Alternatively an "alt\_dma\_rxchan" descriptor can be used to}
00061 \textcolor{comment}{ * receive data.}
00062 \textcolor{comment}{ */}
00063 
00064 \textcolor{comment}{/*}
00065 \textcolor{comment}{ * alt\_dma\_txchan\_open() is used to obtain an "alt\_dma\_txchan" descriptor for}
00066 \textcolor{comment}{ * a DMA transmit device. The name is the name of the associated physical}
00067 \textcolor{comment}{ * device (e.g. "/dev/dma\_0").}
00068 \textcolor{comment}{ *}
00069 \textcolor{comment}{ * The return value will be NULL on failure, and non-NULL otherwise. }
00070 \textcolor{comment}{ */}
00071 
00072 \textcolor{keyword}{extern} alt_dma_txchan alt_dma_txchan_open (\textcolor{keyword}{const} \textcolor{keywordtype}{char}* name);
00073 
00074 \textcolor{comment}{/*}
00075 \textcolor{comment}{ * alt\_dma\_txchan\_close() is provided so that an application can notify the }
00076 \textcolor{comment}{ * system that it has finished with a given DMA transmit channel. This is only}
00077 \textcolor{comment}{ * provided for completness.}
00078 \textcolor{comment}{ */}
00079 
00080 \textcolor{keyword}{static} ALT_INLINE \textcolor{keywordtype}{int} alt_dma_txchan_close (alt_dma_txchan dma)
00081 \{
00082   \textcolor{keywordflow}{return} 0;
00083 \}
00084 
00085 \textcolor{comment}{/*}
00086 \textcolor{comment}{ * alt\_dma\_txchan\_send() posts a transmit request to a DMA transmit channel.}
00087 \textcolor{comment}{ * The input arguments are:}
00088 \textcolor{comment}{ *}
00089 \textcolor{comment}{ * dma: the channel to use.}
00090 \textcolor{comment}{ * from: a pointer to the start of the data to send.}
00091 \textcolor{comment}{ * length: the length of the data to send in bytes.}
00092 \textcolor{comment}{ * done: callback function that will be called once the data has been sent.}
00093 \textcolor{comment}{ * handle: opaque value passed to "done".}
00094 \textcolor{comment}{ *}
00095 \textcolor{comment}{ * The return value will be negative if the request cannot be posted, and}
00096 \textcolor{comment}{ * zero otherwise.}
00097 \textcolor{comment}{ */}
00098 
00099 \textcolor{keyword}{static} ALT_INLINE \textcolor{keywordtype}{int} alt_dma_txchan_send (alt_dma_txchan dma, 
00100              \textcolor{keyword}{const} \textcolor{keywordtype}{void}* from, 
00101              alt_u32 length,
00102              alt_txchan_done* done, 
00103              \textcolor{keywordtype}{void}* handle)
00104 \{
00105   \textcolor{keywordflow}{return} dma ? dma->dma_send (dma, 
00106         from, 
00107         length,
00108         done, 
00109         handle) : -ENODEV;
00110 \}
00111 
00112 \textcolor{comment}{/*}
00113 \textcolor{comment}{ * alt\_dma\_txchan\_space() returns the number of tranmit requests that can be }
00114 \textcolor{comment}{ * posted to the specified DMA transmit channel.}
00115 \textcolor{comment}{ *}
00116 \textcolor{comment}{ * A negative value indicates that the value could not be determined. }
00117 \textcolor{comment}{ */}
00118 
00119 \textcolor{keyword}{static} ALT_INLINE \textcolor{keywordtype}{int} alt_dma_txchan_space (alt_dma_txchan dma)
00120 \{
00121   \textcolor{keywordflow}{return} dma ? dma->space (dma) : -ENODEV;
00122 \}
00123 
00124 \textcolor{comment}{/*}
00125 \textcolor{comment}{ * alt\_dma\_txchan\_ioctl() can be used to perform device specific I/O }
00126 \textcolor{comment}{ * operations on the indicated DMA transmit channel. For example some drivers}
00127 \textcolor{comment}{ * support options to control the width of the transfer operations. See}
00128 \textcolor{comment}{ * alt\_dma\_dev.h for the list of generic requests.}
00129 \textcolor{comment}{ *}
00130 \textcolor{comment}{ * A negative return value indicates failure, otherwise the interpretation}
00131 \textcolor{comment}{ * of the return value is request specific.  }
00132 \textcolor{comment}{ */}
00133 
00134 \textcolor{keyword}{static} ALT_INLINE \textcolor{keywordtype}{int} alt_dma_txchan_ioctl (alt_dma_txchan dma, 
00135               \textcolor{keywordtype}{int}            req, 
00136               \textcolor{keywordtype}{void}*          arg)
00137 \{
00138   \textcolor{keywordflow}{return} dma ? dma->ioctl (dma, req, arg) : -ENODEV;
00139 \}
00140 
00141 \textcolor{comment}{/*}
00142 \textcolor{comment}{ * alt\_dma\_rxchan\_open() is used to obtain an "alt\_dma\_rxchan" descriptor for}
00143 \textcolor{comment}{ * a DMA receive channel. The name is the name of the associated physical}
00144 \textcolor{comment}{ * device (e.g. "/dev/dma\_0").}
00145 \textcolor{comment}{ *}
00146 \textcolor{comment}{ * The return value will be NULL on failure, and non-NULL otherwise. }
00147 \textcolor{comment}{ */}
00148 
00149 \textcolor{keyword}{extern} alt_dma_rxchan alt_dma_rxchan_open (\textcolor{keyword}{const} \textcolor{keywordtype}{char}* dev);
00150 
00151 \textcolor{comment}{/*}
00152 \textcolor{comment}{ * alt\_dma\_rxchan\_close() is provided so that an application can notify the }
00153 \textcolor{comment}{ * system that it has finished with a given DMA receive channel. This is only}
00154 \textcolor{comment}{ * provided for completness.}
00155 \textcolor{comment}{ */}
00156 
00157 \textcolor{keyword}{static} ALT_INLINE \textcolor{keywordtype}{int} alt_dma_rxchan_close (alt_dma_rxchan dma)
00158 \{
00159   \textcolor{keywordflow}{return} 0;
00160 \}
00161 
00162 \textcolor{comment}{/*}
00163 \textcolor{comment}{ *}
00164 \textcolor{comment}{ */}
00165 
00166 \textcolor{comment}{/*}
00167 \textcolor{comment}{ * alt\_dma\_rxchan\_prepare() posts a receive request to a DMA receive channel.}
00168 \textcolor{comment}{ * }
00169 \textcolor{comment}{ * The input arguments are:}
00170 \textcolor{comment}{ *}
00171 \textcolor{comment}{ * dma: the channel to use.}
00172 \textcolor{comment}{ * data: a pointer to the location that data is to be received to.}
00173 \textcolor{comment}{ * len: the maximum length of the data to receive. }
00174 \textcolor{comment}{ * done: callback function that will be called once the data has been }
00175 \textcolor{comment}{ *       received.}
00176 \textcolor{comment}{ * handle: opaque value passed to "done".}
00177 \textcolor{comment}{ *}
00178 \textcolor{comment}{ * The return value will be negative if the request cannot be posted, and}
00179 \textcolor{comment}{ * zero otherwise.}
00180 \textcolor{comment}{ */}
00181 
00182 \textcolor{keyword}{static} ALT_INLINE \textcolor{keywordtype}{int} alt_dma_rxchan_prepare (alt_dma_rxchan   dma, 
00183                                               \textcolor{keywordtype}{void}*            data,
00184                                               alt_u32          len,
00185                                               alt_rxchan_done* done,  
00186                                               \textcolor{keywordtype}{void}*            handle)
00187 \{
00188   \textcolor{keywordflow}{return} dma ? dma->prepare (dma, data, len, done, handle) : -ENODEV;
00189 \}
00190 
00191 \textcolor{comment}{/*}
00192 \textcolor{comment}{ * alt\_dma\_rxchan\_ioctl() can be used to perform device specific I/O }
00193 \textcolor{comment}{ * operations on the indicated DMA receive channel. For example some drivers}
00194 \textcolor{comment}{ * support options to control the width of the transfer operations. See}
00195 \textcolor{comment}{ * alt\_dma\_dev.h for the list of generic requests.}
00196 \textcolor{comment}{ *}
00197 \textcolor{comment}{ * A negative return value indicates failure, otherwise the interpretation}
00198 \textcolor{comment}{ * of the return value is request specific.  }
00199 \textcolor{comment}{ */}
00200 
00201 \textcolor{keyword}{static} ALT_INLINE \textcolor{keywordtype}{int} alt_dma_rxchan_ioctl (alt_dma_rxchan dma, 
00202               \textcolor{keywordtype}{int}            req, 
00203               \textcolor{keywordtype}{void}*          arg)
00204 \{
00205   \textcolor{keywordflow}{return} dma ? dma->ioctl (dma, req, arg) : -ENODEV;
00206 \}
00207 
00208 \textcolor{comment}{/*}
00209 \textcolor{comment}{ * alt\_dma\_rxchan\_depth() returns the depth of the receive FIFO used to store}
00210 \textcolor{comment}{ * receive requests.}
00211 \textcolor{comment}{ */}
00212 
00213 \textcolor{keyword}{static} ALT_INLINE alt_u32 alt_dma_rxchan_depth(alt_dma_rxchan dma)
00214 \{
00215   \textcolor{keywordflow}{return} dma->depth;
00216 \}
00217 
00218 \textcolor{comment}{/*}
00219 \textcolor{comment}{ *}
00220 \textcolor{comment}{ */}
00221 
00222 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00223 \}
00224 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* \_\_cplusplus */}\textcolor{preprocessor}{}
00225 
00226 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* \_\_ALT\_DMA\_H\_\_ */}\textcolor{preprocessor}{}
\end{DoxyCode}
